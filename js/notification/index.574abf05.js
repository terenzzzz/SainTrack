import{r as R,q as w,c as y,R as t,J as l,al as s,o as p,a as n,Q as x,a4 as j,O as i,u as P,D as L,P as _,W as M,I as B}from"../@vue/@vue.f1ada3fe.js";import{E as T}from"../md-editor-v3/md-editor-v3.c6ef256f.js";import{_ as $}from"../../assets/index-12956b57.js";import"../@vavt/@vavt.eacd11c2.js";import"../@codemirror/@codemirror.105aab08.js";import"../@lezer/@lezer.53ecb665.js";import"../crelt/crelt.7bb88e1d.js";import"../@marijn/@marijn.45184d7f.js";import"../style-mod/style-mod.ab9c37a6.js";import"../w3c-keyname/w3c-keyname.9fb136d3.js";import"../medium-zoom/medium-zoom.9a5daf0e.js";import"../markdown-it/markdown-it.de2b7434.js";import"../mdurl/mdurl.d7fdfec3.js";import"../uc.micro/uc.micro.2ff9f57e.js";import"../linkify-it/linkify-it.c931940f.js";import"../punycode.js/punycode.js.c41da3d1.js";import"../markdown-it-image-figures/markdown-it-image-figures.6b4113de.js";import"../markdown-it-sub/markdown-it-sub.7f11bbf3.js";import"../markdown-it-sup/markdown-it-sup.e798c984.js";import"../lucide-vue-next/lucide-vue-next.8f072a41.js";import"../element-plus/element-plus.582edd78.js";import"../lodash-es/lodash-es.741e4bc3.js";import"../@element-plus/@element-plus.41fc00c7.js";import"../@popperjs/@popperjs.c75af06c.js";import"../@ctrl/@ctrl.f8748455.js";import"../dayjs/dayjs.b359c3c4.js";import"../clipboard/clipboard.45ef5b9b.js";import"../async-validator/async-validator.dee29e8b.js";import"../memoize-one/memoize-one.297ddbcb.js";import"../normalize-wheel-es/normalize-wheel-es.ed76fb12.js";import"../@floating-ui/@floating-ui.1ea5e47f.js";import"../pinia/pinia.680ff890.js";import"../js-cookie/js-cookie.edb2da2a.js";import"../axios/axios.4a70c6fc.js";import"../vue-router/vue-router.76444184.js";import"../path-to-regexp/path-to-regexp.6c7b4327.js";import"../fuse.js/fuse.js.88e2763d.js";import"../path-browserify/path-browserify.cb69e156.js";import"../screenfull/screenfull.b3e6dc1f.js";import"../vue-i18n/vue-i18n.187cabd5.js";import"../@intlify/@intlify.771bffe6.js";import"../mitt/mitt.f7ef348c.js";import"../@vueuse/@vueuse.a490c7b0.js";import"../nprogress/nprogress.6ec30c0f.js";/* empty css                                 */import"../xe-utils/xe-utils.78945774.js";import"../vxe-table/vxe-table.5c5e0e8d.js";import"../vue3-lottie/vue3-lottie.108a33f7.js";import"../lottie-web/lottie-web.88e5cf38.js";const Y={class:"page-container"},q={class:"side-bar sticky"},F={class:"d-flex flex-column setting-list"},J=["onClick"],Q={class:"title d-flex justify-between align-center"},W={class:"info"},X={style:{display:"flex","align-items":"center",gap:"8px",width:"100%"}},G={style:{display:"flex","justify-content":"center",width:"100%"}},K={class:"variable-buttons"},Z={class:"d-flex justify-end"},ee={__name:"index",setup(te){const f=R("# Hello Editor"),v=w([{title:"Picked Up 通知客人",enabled:!0,store:"ororo",receiver:"customer",rule:"Picked Up",lastChange:"24/01/15",conditions:[{key:Date.now()+Math.random(),value:"Condition A1"}],subject:"Picked Up 客户通知",templateContent:"Hello Customer! Your order has been picked up.",delay:5},{title:"Shipped 通知管理员",enabled:!1,store:"ororo",receiver:"admin",rule:"Shipped",lastChange:"24/01/20",conditions:[{key:Date.now()+Math.random(),value:"Condition B1"}],subject:"Shipped 管理员通知",templateContent:"Hello Admin! A new order has been shipped.",delay:10},{title:"Delivered 通知客户",enabled:!0,store:"ororo",receiver:"customer",rule:"Delivered",lastChange:"24/01/25",conditions:[{key:Date.now()+Math.random(),value:"Condition C1"}],subject:"Delivered 客户通知",templateContent:"Hello Customer! Your order has been delivered.",delay:0}]),E=w([{label:"customer_name",value:"{{ customer_name }}"},{label:"order_number",value:"{{ order_number }}"},{label:"carrier",value:"{{ carrier }}"},{label:"product_list",value:"{{ product_list }}"},{label:"customer_service_email",value:"{{ customer_service_email }}"}]),g=R(0),o=w({store:"ororo",receiver:"customer",conditions:[{key:Date.now()+Math.random(),value:""}],time_from:"",time_to:"",delivery:!1,type:[],resource:"",desc:"",subject:"",delay:0});function h(a){g.value=a;const e=v[a];Object.assign(o,{store:e.store,receiver:e.receiver,time_from:e.time_from||"",time_to:e.time_to||"",conditions:e.conditions?e.conditions.map(C=>({...C})):[{key:Date.now()+Math.random(),value:""}],delivery:e.delivery||!1,type:e.type||[],resource:e.resource||"",desc:e.desc||"",subject:e.subject||"",delay:e.delay||0}),f.value=e.templateContent||""}const A=a=>{f.value+=a};function I(){const a={title:"新规则",enabled:!0,store:"ororo",receiver:"customer",rule:"New Rule",lastChange:new Date().toISOString().slice(2,10),conditions:[{key:Date.now()+Math.random(),value:""}],subject:"",templateContent:"",delay:0};v.push(a),h(v.length-1)}const N=()=>{const a=v[g.value];Object.assign(a,{store:o.store,receiver:o.receiver,time_from:o.time_from,time_to:o.time_to,conditions:o.conditions,delivery:o.delivery,type:o.type,resource:o.resource,desc:o.desc,subject:o.subject,templateContent:f.value,delay:o.delay}),console.log("submit!",a)};function O(){o.conditions.push({key:Date.now()+Math.random(),value:""})}function z(a){o.conditions.splice(a,1)}return(a,e)=>{const C=s("el-switch"),m=s("el-col"),D=s("el-option"),S=s("el-select"),d=s("el-form-item"),H=s("el-time-picker"),V=s("el-input"),k=s("el-row"),c=s("el-button"),U=s("el-form");return p(),y("div",Y,[t(k,{gutter:24},{default:l(()=>[t(m,{md:24,lg:7,class:"side-bar-wrapper"},{default:l(()=>[n("div",q,[n("div",{class:"d-flex justify-between align-center"},[e[7]||(e[7]=n("h3",{class:"h3"},"Setting List",-1)),n("button",{class:"add-btn",onClick:I},"Add New Rule")]),n("ul",F,[(p(!0),y(x,null,j(v,(r,u)=>(p(),y("li",{key:u,class:L(["rule",{active:g.value===u}]),onClick:b=>h(u)},[n("div",Q,[i(_(r.title)+" ",1),t(C,{modelValue:r.enabled,"onUpdate:modelValue":b=>r.enabled=b,onClick:e[0]||(e[0]=M(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])]),n("div",W,[n("p",null,[e[8]||(e[8]=i(" Store: ",-1)),n("small",null,_(r.store),1)]),n("p",null,[e[9]||(e[9]=i(" Receiver: ",-1)),n("small",null,_(r.receiver),1)]),n("p",null,[e[10]||(e[10]=i(" Rule: ",-1)),n("small",null,_(r.rule),1)]),n("p",null,[e[11]||(e[11]=i(" Last Change: ",-1)),n("small",null,_(r.lastChange),1)])])],10,J))),128))])])]),_:1}),t(m,{md:24,lg:17,class:"rule-setting"},{default:l(()=>[t(k,null,{default:l(()=>[t(m,{span:24,class:"setting-form"},{default:l(()=>[e[15]||(e[15]=n("h3",{class:"h3 text-center"},"Rule Setting",-1)),t(U,{model:o,"label-width":"auto"},{default:l(()=>[t(d,{label:"Store"},{default:l(()=>[t(S,{modelValue:o.store,"onUpdate:modelValue":e[1]||(e[1]=r=>o.store=r),placeholder:"please select your zone"},{default:l(()=>[t(D,{label:"Ororo",value:"ororo"})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"Receiver"},{default:l(()=>[t(S,{modelValue:o.receiver,"onUpdate:modelValue":e[2]||(e[2]=r=>o.receiver=r),placeholder:"please select your zone"},{default:l(()=>[t(D,{label:"Customer",value:"customer"})]),_:1},8,["modelValue"])]),_:1}),t(k,{gutter:20},{default:l(()=>[t(m,{md:24,lg:13},{default:l(()=>[t(d,{label:"Shipped Between"},{default:l(()=>[t(H,{modelValue:o.time_from,"onUpdate:modelValue":e[3]||(e[3]=r=>o.time_from=r),"is-range":"","range-separator":"To","start-placeholder":"Start time","end-placeholder":"End time"},null,8,["modelValue"])]),_:1})]),_:1}),t(m,{md:24,lg:11},{default:l(()=>[t(d,{label:"Delay"},{default:l(()=>[t(V,{modelValue:o.delay,"onUpdate:modelValue":e[4]||(e[4]=r=>o.delay=r),style:{width:"100px"},placeholder:"0"},null,8,["modelValue"]),e[12]||(e[12]=n("span",{style:{"margin-left":"8px"}},"minute",-1))]),_:1})]),_:1})]),_:1}),(p(!0),y(x,null,j(o.conditions,(r,u)=>(p(),B(d,{class:"condition-field",key:r.key,label:"Condition "+(u+1),prop:"conditions."+u+".value"},{default:l(()=>[n("div",X,[t(V,{modelValue:r.value,"onUpdate:modelValue":b=>r.value=b,style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),t(c,{type:"danger",onClick:M(b=>z(u),["prevent"])},{default:l(()=>[...e[13]||(e[13]=[i(" X ",-1)])]),_:2},1032,["onClick"])])]),_:2},1032,["label","prop"]))),128)),t(d,null,{default:l(()=>[n("div",G,[t(c,{type:"primary",onClick:O},{default:l(()=>[...e[14]||(e[14]=[i("Add Condition",-1)])]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1}),t(m,{span:24,class:"setting-template"},{default:l(()=>[e[16]||(e[16]=n("h3",{class:"h3 text-center"},"Email Template Setting",-1)),t(U,{model:o,"label-width":"auto"},{default:l(()=>[t(d,{label:"Subject"},{default:l(()=>[t(V,{modelValue:o.subject,"onUpdate:modelValue":e[5]||(e[5]=r=>o.subject=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t(d,{label:"Variables"},{default:l(()=>[n("div",K,[(p(!0),y(x,null,j(E,r=>(p(),B(c,{key:r.label,plain:"",size:"mini",onClick:u=>A(r.value)},{default:l(()=>[i(_(r.label),1)]),_:2},1032,["onClick"]))),128))])]),_:1}),t(P(T),{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=r=>f.value=r)},null,8,["modelValue"])]),_:1}),t(m,{class:"action-group"},{default:l(()=>[n("div",Z,[t(c,null,{default:l(()=>[...e[17]||(e[17]=[i("Cancel",-1)])]),_:1}),t(c,{type:"danger"},{default:l(()=>[...e[18]||(e[18]=[i("Delete",-1)])]),_:1}),t(c,{type:"primary",onClick:N},{default:l(()=>[...e[19]||(e[19]=[i("Create",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})])}}},Ge=$(ee,[["__scopeId","data-v-bfb19bd9"]]);export{Ge as default};
