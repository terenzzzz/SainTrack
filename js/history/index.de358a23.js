import{_ as C}from"../../assets/index-3d7a7aa0.js";import{r as y,f as V,al as r,o as f,c as w,a as c,R as t,J as l,Q as L,a4 as O,I as k,O as v,P as j,t as U}from"../@vue/@vue.f1ada3fe.js";import{O as B}from"../order/order.c33a65f3.js";import"../element-plus/element-plus.582edd78.js";import"../lodash-es/lodash-es.741e4bc3.js";import"../@element-plus/@element-plus.41fc00c7.js";import"../@popperjs/@popperjs.c75af06c.js";import"../@ctrl/@ctrl.f8748455.js";import"../dayjs/dayjs.b359c3c4.js";import"../clipboard/clipboard.45ef5b9b.js";import"../async-validator/async-validator.dee29e8b.js";import"../memoize-one/memoize-one.297ddbcb.js";import"../normalize-wheel-es/normalize-wheel-es.ed76fb12.js";import"../@floating-ui/@floating-ui.1ea5e47f.js";import"../pinia/pinia.680ff890.js";import"../js-cookie/js-cookie.edb2da2a.js";import"../axios/axios.4a70c6fc.js";import"../@codemirror/@codemirror.105aab08.js";import"../@lezer/@lezer.53ecb665.js";import"../crelt/crelt.7bb88e1d.js";import"../@marijn/@marijn.45184d7f.js";import"../style-mod/style-mod.ab9c37a6.js";import"../w3c-keyname/w3c-keyname.9fb136d3.js";import"../vue-router/vue-router.76444184.js";import"../path-to-regexp/path-to-regexp.6c7b4327.js";import"../fuse.js/fuse.js.88e2763d.js";import"../path-browserify/path-browserify.cb69e156.js";import"../screenfull/screenfull.b3e6dc1f.js";import"../vue-i18n/vue-i18n.187cabd5.js";import"../@intlify/@intlify.771bffe6.js";import"../mitt/mitt.f7ef348c.js";import"../@vueuse/@vueuse.a490c7b0.js";import"../nprogress/nprogress.6ec30c0f.js";/* empty css                                 */import"../xe-utils/xe-utils.78945774.js";import"../vxe-table/vxe-table.5c5e0e8d.js";import"../vue3-lottie/vue3-lottie.108a33f7.js";import"../lottie-web/lottie-web.88e5cf38.js";const F={class:"container"},A={class:"d-flex justify-center"},H={class:"table-wrapper"},I={__name:"HistoryTable",setup(N){const d=y([{store:"Shopify-001",order_no:"100001",customer_name:"Alice",email:"alice@example.com",notification_name:"Shipping Notification",status:"Success",sent_at:"2025-08-30 12:30:00"},{store:"Amazon-Store",order_no:"100002",customer_name:"Bob",email:"bob@example.com",notification_name:"Delay Notification",status:"Failed",sent_at:"2025-08-30 12:35:00"},{store:"Ebay-Seller",order_no:"100003",customer_name:"Cathy",email:"cathy@example.com",notification_name:"Order Confirmation",status:"Success",sent_at:"2025-08-30 13:00:00"}]),o=y({order_no:"",customer_name:"",email:"",status:"",notification_name:""}),S=V(()=>{const s=d.value.map(e=>e.notification_name);return[...new Set(s)]}),_=V(()=>d.value.filter(s=>{const e=s.order_no.toLowerCase().includes(o.value.order_no.toLowerCase()),u=s.customer_name.toLowerCase().includes(o.value.customer_name.toLowerCase()),i=s.email.toLowerCase().includes(o.value.email.toLowerCase()),m=o.value.status?s.status===o.value.status:!0,n=o.value.notification_name?s.notification_name===o.value.notification_name:!0;return e&&u&&i&&m&&n})),b=()=>{const s=["Store","Order No","Customer Name","Email","Notification Name","Status","Sent At"],e=_.value.map(n=>[n.store,n.order_no,n.customer_name,n.email,n.notification_name,n.status,n.sent_at]),u=[s,...e].map(n=>n.join(",")).join(`
`),i=new Blob([u],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");m.href=URL.createObjectURL(i),m.download="email_history.csv",m.click()};return(s,e)=>{const u=r("el-input"),i=r("el-col"),m=r("el-option"),n=r("el-select"),x=r("el-row"),g=r("el-button"),p=r("el-table-column"),h=r("el-tag"),E=r("el-table");return f(),w("div",F,[e[12]||(e[12]=c("h3",{class:"h3 justify-center"},"Email History",-1)),t(x,{gutter:20,class:"actions-wrapper justify-center"},{default:l(()=>[t(i,{span:4},{default:l(()=>[e[5]||(e[5]=c("p",{class:"label"},"Search Order No:",-1)),t(u,{modelValue:o.value.order_no,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.order_no=a),placeholder:"Enter Order No",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{span:4},{default:l(()=>[e[6]||(e[6]=c("p",{class:"label"},"Search Customer:",-1)),t(u,{modelValue:o.value.customer_name,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.customer_name=a),placeholder:"Enter Customer Name",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{span:4},{default:l(()=>[e[7]||(e[7]=c("p",{class:"label"},"Search Email:",-1)),t(u,{modelValue:o.value.email,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.email=a),placeholder:"Enter Email",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{span:4},{default:l(()=>[e[8]||(e[8]=c("p",{class:"label"},"Filter by Status:",-1)),t(n,{modelValue:o.value.status,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.status=a),placeholder:"Select Status",clearable:""},{default:l(()=>[t(m,{label:"Success",value:"Success"}),t(m,{label:"Failed",value:"Failed"})]),_:1},8,["modelValue"])]),_:1}),t(i,{span:4},{default:l(()=>[e[9]||(e[9]=c("p",{class:"label"},"Filter by Notification:",-1)),t(n,{modelValue:o.value.notification_name,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.notification_name=a),placeholder:"Select Notification",clearable:""},{default:l(()=>[(f(!0),w(L,null,O(S.value,a=>(f(),k(m,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),c("div",A,[t(g,{type:"info",disabled:""},{default:l(()=>[...e[10]||(e[10]=[v("Import from CSV",-1)])]),_:1}),t(g,{type:"primary",onClick:b},{default:l(()=>[...e[11]||(e[11]=[v("Export to CSV",-1)])]),_:1})]),c("div",H,[t(E,{data:_.value,"tooltip-effect":"dark",style:{width:"100%",height:"100%"},"default-sort":{prop:"sent_at",order:"descending"}},{default:l(()=>[t(p,{prop:"store",label:"Store",width:"150",align:"left",sortable:""}),t(p,{prop:"order_no",label:"Order No","min-width":"150",align:"center",sortable:""}),t(p,{prop:"customer_name",label:"Customer Name","min-width":"120",align:"left",sortable:""}),t(p,{prop:"email",label:"Email","min-width":"200",align:"left",sortable:""}),t(p,{prop:"notification_name",label:"Notification Name","min-width":"200",align:"left"}),t(p,{label:"Status",width:"150",align:"center"},{default:l(a=>[t(h,{type:a.row.status==="Success"?"success":"danger"},{default:l(()=>[v(j(a.row.status),1)]),_:2},1032,["type"])]),_:1}),t(p,{prop:"sent_at",label:"Sent At","min-width":"200",sortable:""})]),_:1},8,["data"])])])}}},T=C(I,[["__scopeId","data-v-1e5eb5de"]]);const R={class:"page-container"},$={class:"container"},D={__name:"index",setup(N){const d=y([]);return U(async()=>{try{const o=await B();console.log(o.data),d.value=o.data||[]}catch(o){console.error("获取订单列表失败:",o.message)}}),(o,S)=>{const _=r("el-col"),b=r("el-row");return f(),w("div",R,[c("div",$,[t(b,{gutter:20,class:"table-list",justify:"center"},{default:l(()=>[t(_,{span:24},{default:l(()=>[t(T,{columns:["store","order_no","customer_name","courier","tracking_no","status","delivery_status","created_at","operations"],"order-list":d.value},null,8,["order-list"])]),_:1})]),_:1})])])}}},he=C(D,[["__scopeId","data-v-8d037afa"]]);export{he as default};
