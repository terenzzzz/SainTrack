var ii=Object.defineProperty;var ai=(e,t,l)=>t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var Y=(e,t,l)=>(ai(e,typeof t!="symbol"?t+"":t,l),l),cl=(e,t,l)=>{if(!t.has(e))throw TypeError("Cannot "+l)};var d=(e,t,l)=>(cl(e,t,"read from private field"),l?l.call(e):t.get(e)),O=(e,t,l)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,l)},I=(e,t,l,n)=>(cl(e,t,"write to private field"),n?n.call(e,l):t.set(e,l),l),Mt=(e,t,l,n)=>({set _(o){I(e,t,o,l)},get _(){return d(e,t,n)}}),E=(e,t,l)=>(cl(e,t,"access private method"),l);import{M as ri,u as si,U as vl,k as ko,c as ci,x as Co,I as ui,C as di,$ as fi}from"../@vavt/@vavt.eacd11c2.js";import{d as K,i as R,R as m,q as be,r as V,w as D,t as Z,X as ot,_ as _t,A as Se,f as ce,Q as Ht,ax as hi,H as Ne,v as Pe,s as nt,a1 as mi,ac as To,aa as gi}from"../@vue/@vue.f1ada3fe.js";import{_ as vi,E as We,H as $o,s as So,k as pi,h as Dn,m as bi,d as yi,u as wi,r as ki,a as Ci,b as ul,i as Ti,p as $i,c as ft,C as st,e as Si,f as xi,g as _i,l as Ei,S as Ai,j as Li,n as Ii}from"../@codemirror/@codemirror.105aab08.js";import{m as Fi}from"../medium-zoom/medium-zoom.9a5daf0e.js";import{M as Ri}from"../markdown-it/markdown-it.de2b7434.js";import{r as Hi}from"../markdown-it-image-figures/markdown-it-image-figures.6b4113de.js";import{s as Mi}from"../markdown-it-sub/markdown-it-sub.7f11bbf3.js";import{s as Oi}from"../markdown-it-sup/markdown-it-sup.e798c984.js";import{B as Di,U as Ni,I as Pi,S as Bi,H as ji,a as Vi,b as zi,Q as Wi,L as Ui,c as Gi,d as qi,C as Xi,e as Nn,f as Ki,g as Yi,T as Zi,R as Qi,F as Ji,h as ea,M as ta,i as la,j as na,E as oa,V as ia,k as aa,l as ra,m as sa,n as ca,o as ua,X as da,p as fa,q as ha}from"../lucide-vue-next/lucide-vue-next.8f072a41.js";import{a as S}from"../@lezer/@lezer.53ecb665.js";const c="md-editor",X="https://unpkg.com",ma=`${X}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,Pn={main:`${X}/prettier@3.3.3/standalone.js`,markdown:`${X}/prettier@3.3.3/plugins/markdown.js`},ga={css:`${X}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${X}/cropperjs@1.6.2/dist/cropper.min.js`},va=`${X}/screenfull@5.2.0/dist/screenfull.js`,pa=`${X}/mermaid@11.9.0/dist/mermaid.min.js`,ba={js:`${X}/katex@0.16.22/dist/katex.min.js`,css:`${X}/katex@0.16.22/dist/katex.min.css`},pl={a11y:{light:`${X}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${X}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${X}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${X}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${X}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${X}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${X}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${X}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${X}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${X}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${X}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${X}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${X}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${X}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${X}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${X}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},xo=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],_o=["markdownTotal","=","scrollSwitch"],Bn={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Crop And Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},oe={editorExtensions:{highlight:{js:ma,css:pl},prettier:{standaloneJs:Pn.main,parserMarkdownJs:Pn.markdown},cropper:{...ga},screenfull:{js:va},mermaid:{js:pa,enableZoom:!0},katex:{...ba}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,t)=>t,markdownItConfig:()=>{},markdownItPlugins:e=>e,mermaidConfig:e=>e,katexConfig:e=>e},Ot=.1,ye=({instance:e,ctx:t,props:l={}},n="default")=>{const o=(e==null?void 0:e.$slots[n])||(t==null?void 0:t.slots[n]);return(o?o(e):"")||l[n]},ya={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"},disabled:{type:Boolean,default:void 0}},ct=K({name:`${c}-dropdown`,props:ya,setup(e,t){const l=`${c}-dropdown-hidden`,n=be({overlayClass:[l],overlayStyle:{},triggerHover:!1,overlayHover:!1}),o=V(),i=V(),a=()=>{var h,s;if(e.disabled)return!1;n.triggerHover=!0;const g=o.value,v=i.value;if(!g||!v)return;const C=g.getBoundingClientRect(),T=g.offsetTop,w=g.offsetLeft,k=C.height,p=C.width,b=g.getRootNode(),$=((h=b.querySelector(e.relative))==null?void 0:h.scrollLeft)||0,y=((s=b.querySelector(e.relative))==null?void 0:s.clientWidth)||0;let _=w-v.offsetWidth/2+p/2-$;_+v.offsetWidth>$+y&&(_=$+y-v.offsetWidth),_<0&&(_=0),n.overlayStyle={...n.overlayStyle,top:T+k+"px",left:_+"px"},e.onChange(!0)},u=()=>{if(e.disabled)return!1;n.overlayHover=!0};D(()=>e.visible,h=>{h?n.overlayClass=n.overlayClass.filter(s=>s!==l):n.overlayClass.push(l)});let r=-1;const f=h=>{o.value===h.target?n.triggerHover=!1:n.overlayHover=!1,clearTimeout(r),r=window.setTimeout(()=>{!n.overlayHover&&!n.triggerHover&&e.onChange(!1)},10)};return Z(()=>{o.value.addEventListener("mouseenter",a),o.value.addEventListener("mouseleave",f),i.value.addEventListener("mouseenter",u),i.value.addEventListener("mouseleave",f)}),ot(()=>{o.value.removeEventListener("mouseenter",a),o.value.removeEventListener("mouseleave",f),i.value.removeEventListener("mouseenter",u),i.value.removeEventListener("mouseleave",f)}),()=>{const h=ye({ctx:t}),s=ye({props:e,ctx:t},"overlay"),g=_t(h instanceof Array?h[0]:h,{ref:o,key:"cloned-dropdown-trigger"}),v=m("div",{class:[`${c}-dropdown`,n.overlayClass],style:n.overlayStyle,ref:i},[m("div",{class:`${c}-dropdown-overlay`},[s instanceof Array?s[0]:s])]);return[g,v]}}}),wa={title:{type:String,default:""},visible:{type:Boolean,default:void 0},trigger:{type:[String,Object],default:void 0},onChange:{type:Function,default:void 0},overlay:{type:[String,Object],default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},jt=K({name:"DropdownToolbar",props:wa,emits:["onChange"],setup(e,t){const l=R("editorId");return()=>{const n=ye({props:e,ctx:t},"trigger"),o=ye({props:e,ctx:t},"overlay"),i=ye({props:e,ctx:t});return m(ct,{relative:`#${l}-toolbar-wrapper`,visible:e.visible,onChange:a=>{var u;(u=e.onChange)==null||u.call(e,a),t.emit("onChange",a)},overlay:o,disabled:e.disabled},{default:()=>[m("div",{class:[`${c}-toolbar-item`,e.disabled&&`${c}-disabled`],title:e.title||""},[i||n])]})}}});jt.install=e=>(e.component(jt.name,jt),e);var ka=Object.defineProperty,Ca=(e,t,l)=>t in e?ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Ta=(e,t,l)=>Ca(e,typeof t!="symbol"?t+"":t,l);class $a{constructor(){Ta(this,"pools",{})}remove(t,l,n){const i=this.pools[t]&&this.pools[t][l];i&&(this.pools[t][l]=i.filter(a=>a!==n))}clear(t){this.pools[t]={}}on(t,l){return this.pools[t]||(this.pools[t]={}),this.pools[t][l.name]||(this.pools[t][l.name]=[]),this.pools[t][l.name].push(l.callback),this.pools[t][l.name].includes(l.callback)}emit(t,l,...n){this.pools[t]||(this.pools[t]={});const i=this.pools[t][l];i&&i.forEach(a=>{try{a(...n)}catch(u){console.error(`${l} monitor event exception！`,u)}})}}const x=new $a,ol="onSave",xl="changeCatalogVisible",Eo="changeFullscreen",jn="pageFullscreenChanged",Vn="fullscreenChanged",zn="previewChanged",Wn="previewOnlyChanged",Un="htmlPreviewChanged",Gn="catalogVisibleChanged",Vt="buildFinished",Qe="errorCatcher",W="replace",il="uploadImage",bl="openModals",Ao="ctrlZ",Lo="ctrlShiftZ",St="catalogChanged",Io="pushCatalog",_l="rerender",Fo="eventListener",Ro="taskStateChanged",Ho="sendEditorView",Jt="getEditorView",Sa={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${c}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${c}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`,pin:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin"><path d="M12 17v5"/><path d="M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"/></svg>',"pin-off":'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin-off"><path d="M12 17v5"/><path d="M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89"/><path d="m2 2 20 20"/><path d="M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11"/></svg>'},zt=(e,t)=>typeof t[e]=="string"?t[e]:Sa[e],qn=(e,t)=>{const l=n=>{const o=e.parentElement||document.body,i=o.offsetWidth,a=o.offsetHeight,{clientWidth:u,clientHeight:r}=document.documentElement,f=n.offsetX,h=n.offsetY,s=v=>{let C=v.x+document.body.scrollLeft-document.body.clientLeft-f,T=v.y+document.body.scrollTop-document.body.clientTop-h;C=C<1?1:C<u-i-1?C:u-i-1,T=T<1?1:T<r-a-1?T:r-a-1,t?t(C,T):(o.style.left=`${C}px`,o.style.top=`${T}px`)};document.addEventListener("mousemove",s);const g=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",g)};document.addEventListener("mouseup",g)};return e.addEventListener("mousedown",l),()=>{e.removeEventListener("mousedown",l)}},Ee=(e,t,l="")=>{var n;const o=document.getElementById(t.id);if(o)l!==""&&(Reflect.get(window,l)?(n=t.onload)==null||n.call(o,new Event("load")):t.onload&&o.addEventListener("load",t.onload));else{const i={...t};i.onload=null;const a=_a(e,i);t.onload&&a.addEventListener("load",t.onload),document.head.appendChild(a)}},xa=(e,t)=>{const l=document.getElementById(t.id);l==null||l.remove(),Ee(e,t)},_a=(e,t)=>{const l=document.createElement(e);return Object.keys(t).forEach(n=>{t[n]!==void 0&&(l[n]=t[n])}),l},Xn=(()=>{const e=l=>{if(!l)return()=>{};const n=l.firstChild;let o=1,i=0,a=0,u=!1,r,f,h,s=1;const g=()=>{n.style.transform=`translate(${i}px, ${a}px) scale(${o})`},v=y=>{y.touches.length===1?(u=!0,r=y.touches[0].clientX-i,f=y.touches[0].clientY-a):y.touches.length===2&&(h=Math.hypot(y.touches[0].clientX-y.touches[1].clientX,y.touches[0].clientY-y.touches[1].clientY),s=o)},C=y=>{if(y.preventDefault(),u&&y.touches.length===1)i=y.touches[0].clientX-r,a=y.touches[0].clientY-f,g();else if(y.touches.length===2){const H=Math.hypot(y.touches[0].clientX-y.touches[1].clientX,y.touches[0].clientY-y.touches[1].clientY)/h,L=o;o=s*(1+(H-1));const A=(y.touches[0].clientX+y.touches[1].clientX)/2,F=(y.touches[0].clientY+y.touches[1].clientY)/2,B=n.getBoundingClientRect(),M=(A-B.left)/L,z=(F-B.top)/L;i-=M*(o-L),a-=z*(o-L),g()}},T=()=>{u=!1},w=y=>{y.preventDefault();const _=.02,H=o;y.deltaY<0?o+=_:o=Math.max(.1,o-_);const L=n.getBoundingClientRect(),A=y.clientX-L.left,F=y.clientY-L.top;i-=A/H*(o-H),a-=F/H*(o-H),g()},k=y=>{u=!0,r=y.clientX-i,f=y.clientY-a},p=y=>{u&&(i=y.clientX-r,a=y.clientY-f,g())},b=()=>{u=!1},$=()=>{u=!1};return l.addEventListener("touchstart",v,{passive:!1}),l.addEventListener("touchmove",C,{passive:!1}),l.addEventListener("touchend",T),l.addEventListener("wheel",w,{passive:!1}),l.addEventListener("mousedown",k),l.addEventListener("mousemove",p),l.addEventListener("mouseup",b),l.addEventListener("mouseleave",$),()=>{l.removeEventListener("touchstart",v),l.removeEventListener("touchmove",C),l.removeEventListener("touchend",T),l.removeEventListener("wheel",w),l.removeEventListener("mousedown",k),l.removeEventListener("mousemove",p),l.removeEventListener("mouseup",b),l.removeEventListener("mouseleave",$)}};return(l,n)=>{const o=new Map;return l==null||l.forEach(i=>{let a=i.querySelector(`.${c}-mermaid-action`);a||(i.insertAdjacentHTML("beforeend",`<div class="${c}-mermaid-action">${zt("pin-off",n.customIcon)}</div>`),a=i.querySelector(`.${c}-mermaid-action`));const u=()=>{const r=o.get(i);if(r!=null&&r.removeEvent)r.removeEvent(),i.removeAttribute("data-grab"),o.set(i,{removeClick:r.removeClick}),a.innerHTML=zt("pin-off",n.customIcon);else{const f=e(i);i.setAttribute("data-grab",""),o.set(i,{removeEvent:f,removeClick:r==null?void 0:r.removeClick}),a.innerHTML=zt("pin",n.customIcon)}};a.addEventListener("click",u),o.set(i,{removeClick:()=>a.removeEventListener("click",u)})}),()=>{o.forEach(({removeEvent:i,removeClick:a})=>{i==null||i(),a==null||a()}),o.clear()}}})(),Ea=(e,t="image.png")=>{const l=e.split(","),n=l[0].match(/:(.*?);/);if(n){const o=n[1],i=atob(l[1]);let a=i.length;const u=new Uint8Array(a);for(;a--;)u[a]=i.charCodeAt(a);return new File([u],t,{type:o})}return null},Aa=(e,t)=>{if(!e)return e;const l=t.split(`
`),n=['<span rn-wrapper aria-hidden="true">'];return l.forEach(()=>{n.push("<span></span>")}),n.push("</span>"),`<span class="${c}-code-block">${e}</span>${n.join("")}`},La=(e,t)=>{if(!e||!t)return 0;const l=e==null?void 0:e.getBoundingClientRect();if(t===document.documentElement)return l.top-t.clientTop;const n=t==null?void 0:t.getBoundingClientRect();return l.top-n.top},Kn=(()=>{let e=0;return()=>++e})(),at=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Mo=new Set,yl=typeof process=="object"&&process?process:{},Oo=(e,t,l,n)=>{typeof yl.emitWarning=="function"?yl.emitWarning(e,t,l,n):console.error(`[${l}] ${t}: ${e}`)};let el=globalThis.AbortController,Yn=globalThis.AbortSignal;var wo;if(typeof el>"u"){Yn=class{constructor(){Y(this,"onabort");Y(this,"_onabort",[]);Y(this,"reason");Y(this,"aborted",!1)}addEventListener(n,o){this._onabort.push(o)}},el=class{constructor(){Y(this,"signal",new Yn);t()}abort(n){var o,i;if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const a of this.signal._onabort)a(n);(i=(o=this.signal).onabort)==null||i.call(o,n)}}};let e=((wo=yl.env)==null?void 0:wo.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const t=()=>{e&&(e=!1,Oo("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const Ia=e=>!Mo.has(e),Ge=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),Do=e=>Ge(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Wt:null:null;class Wt extends Array{constructor(t){super(t),this.fill(0)}}var mt;const dt=class{constructor(t,l){Y(this,"heap");Y(this,"length");if(!d(dt,mt))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new l(t),this.length=0}static create(t){const l=Do(t);if(!l)return[];I(dt,mt,!0);const n=new dt(t,l);return I(dt,mt,!1),n}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}};let Ut=dt;mt=new WeakMap,O(Ut,mt,!1);var Le,ke,Ie,Je,Fe,gt,vt,ie,Re,ne,q,P,ve,Ce,me,re,He,se,Me,Oe,Te,De,Ze,pe,pt,Et,kl,et,ze,At,$e,nl,No,tt,bt,Lt,Be,qe,je,Xe,It,Cl,Rc,yt,Gt,wt,qt,U,G,Ft,Tl,lt,Ct,Ve,Ke,Rt,$l;const Il=class{constructor(t){O(this,Et);O(this,nl);O(this,Be);O(this,je);O(this,It);O(this,yt);O(this,wt);O(this,U);O(this,Ft);O(this,lt);O(this,Ve);O(this,Rt);O(this,Le,void 0);O(this,ke,void 0);O(this,Ie,void 0);O(this,Je,void 0);O(this,Fe,void 0);O(this,gt,void 0);O(this,vt,void 0);Y(this,"ttl");Y(this,"ttlResolution");Y(this,"ttlAutopurge");Y(this,"updateAgeOnGet");Y(this,"updateAgeOnHas");Y(this,"allowStale");Y(this,"noDisposeOnSet");Y(this,"noUpdateTTL");Y(this,"maxEntrySize");Y(this,"sizeCalculation");Y(this,"noDeleteOnFetchRejection");Y(this,"noDeleteOnStaleGet");Y(this,"allowStaleOnFetchAbort");Y(this,"allowStaleOnFetchRejection");Y(this,"ignoreFetchAbort");O(this,ie,void 0);O(this,Re,void 0);O(this,ne,void 0);O(this,q,void 0);O(this,P,void 0);O(this,ve,void 0);O(this,Ce,void 0);O(this,me,void 0);O(this,re,void 0);O(this,He,void 0);O(this,se,void 0);O(this,Me,void 0);O(this,Oe,void 0);O(this,Te,void 0);O(this,De,void 0);O(this,Ze,void 0);O(this,pe,void 0);O(this,pt,void 0);O(this,et,()=>{});O(this,ze,()=>{});O(this,At,()=>{});O(this,$e,()=>!1);O(this,tt,t=>{});O(this,bt,(t,l,n)=>{});O(this,Lt,(t,l,n,o)=>{if(n||o)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Y(this,Rc,"LRUCache");const{max:l=0,ttl:n,ttlResolution:o=1,ttlAutopurge:i,updateAgeOnGet:a,updateAgeOnHas:u,allowStale:r,dispose:f,onInsert:h,disposeAfter:s,noDisposeOnSet:g,noUpdateTTL:v,maxSize:C=0,maxEntrySize:T=0,sizeCalculation:w,fetchMethod:k,memoMethod:p,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:$,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:_,ignoreFetchAbort:H}=t;if(l!==0&&!Ge(l))throw new TypeError("max option must be a nonnegative integer");const L=l?Do(l):Array;if(!L)throw new Error("invalid max value: "+l);if(I(this,Le,l),I(this,ke,C),this.maxEntrySize=T||d(this,ke),this.sizeCalculation=w,this.sizeCalculation){if(!d(this,ke)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(p!==void 0&&typeof p!="function")throw new TypeError("memoMethod must be a function if defined");if(I(this,vt,p),k!==void 0&&typeof k!="function")throw new TypeError("fetchMethod must be a function if specified");if(I(this,gt,k),I(this,Ze,!!k),I(this,ne,new Map),I(this,q,new Array(l).fill(void 0)),I(this,P,new Array(l).fill(void 0)),I(this,ve,new L(l)),I(this,Ce,new L(l)),I(this,me,0),I(this,re,0),I(this,He,Ut.create(l)),I(this,ie,0),I(this,Re,0),typeof f=="function"&&I(this,Ie,f),typeof h=="function"&&I(this,Je,h),typeof s=="function"?(I(this,Fe,s),I(this,se,[])):(I(this,Fe,void 0),I(this,se,void 0)),I(this,De,!!d(this,Ie)),I(this,pt,!!d(this,Je)),I(this,pe,!!d(this,Fe)),this.noDisposeOnSet=!!g,this.noUpdateTTL=!!v,this.noDeleteOnFetchRejection=!!b,this.allowStaleOnFetchRejection=!!y,this.allowStaleOnFetchAbort=!!_,this.ignoreFetchAbort=!!H,this.maxEntrySize!==0){if(d(this,ke)!==0&&!Ge(d(this,ke)))throw new TypeError("maxSize must be a positive integer if specified");if(!Ge(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");E(this,nl,No).call(this)}if(this.allowStale=!!r,this.noDeleteOnStaleGet=!!$,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!u,this.ttlResolution=Ge(o)||o===0?o:1,this.ttlAutopurge=!!i,this.ttl=n||0,this.ttl){if(!Ge(this.ttl))throw new TypeError("ttl must be a positive integer if specified");E(this,Et,kl).call(this)}if(d(this,Le)===0&&this.ttl===0&&d(this,ke)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!d(this,Le)&&!d(this,ke)){const A="LRU_CACHE_UNBOUNDED";Ia(A)&&(Mo.add(A),Oo("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",A,Il))}}static unsafeExposeInternals(t){return{starts:d(t,Oe),ttls:d(t,Te),sizes:d(t,Me),keyMap:d(t,ne),keyList:d(t,q),valList:d(t,P),next:d(t,ve),prev:d(t,Ce),get head(){return d(t,me)},get tail(){return d(t,re)},free:d(t,He),isBackgroundFetch:l=>{var n;return E(n=t,U,G).call(n,l)},backgroundFetch:(l,n,o,i)=>{var a;return E(a=t,wt,qt).call(a,l,n,o,i)},moveToTail:l=>{var n;return E(n=t,lt,Ct).call(n,l)},indexes:l=>{var n;return E(n=t,Be,qe).call(n,l)},rindexes:l=>{var n;return E(n=t,je,Xe).call(n,l)},isStale:l=>{var n;return d(n=t,$e).call(n,l)}}}get max(){return d(this,Le)}get maxSize(){return d(this,ke)}get calculatedSize(){return d(this,Re)}get size(){return d(this,ie)}get fetchMethod(){return d(this,gt)}get memoMethod(){return d(this,vt)}get dispose(){return d(this,Ie)}get onInsert(){return d(this,Je)}get disposeAfter(){return d(this,Fe)}getRemainingTTL(t){return d(this,ne).has(t)?1/0:0}*entries(){for(const t of E(this,Be,qe).call(this))d(this,P)[t]!==void 0&&d(this,q)[t]!==void 0&&!E(this,U,G).call(this,d(this,P)[t])&&(yield[d(this,q)[t],d(this,P)[t]])}*rentries(){for(const t of E(this,je,Xe).call(this))d(this,P)[t]!==void 0&&d(this,q)[t]!==void 0&&!E(this,U,G).call(this,d(this,P)[t])&&(yield[d(this,q)[t],d(this,P)[t]])}*keys(){for(const t of E(this,Be,qe).call(this)){const l=d(this,q)[t];l!==void 0&&!E(this,U,G).call(this,d(this,P)[t])&&(yield l)}}*rkeys(){for(const t of E(this,je,Xe).call(this)){const l=d(this,q)[t];l!==void 0&&!E(this,U,G).call(this,d(this,P)[t])&&(yield l)}}*values(){for(const t of E(this,Be,qe).call(this))d(this,P)[t]!==void 0&&!E(this,U,G).call(this,d(this,P)[t])&&(yield d(this,P)[t])}*rvalues(){for(const t of E(this,je,Xe).call(this))d(this,P)[t]!==void 0&&!E(this,U,G).call(this,d(this,P)[t])&&(yield d(this,P)[t])}[Symbol.iterator](){return this.entries()}find(t,l={}){for(const n of E(this,Be,qe).call(this)){const o=d(this,P)[n],i=E(this,U,G).call(this,o)?o.__staleWhileFetching:o;if(i!==void 0&&t(i,d(this,q)[n],this))return this.get(d(this,q)[n],l)}}forEach(t,l=this){for(const n of E(this,Be,qe).call(this)){const o=d(this,P)[n],i=E(this,U,G).call(this,o)?o.__staleWhileFetching:o;i!==void 0&&t.call(l,i,d(this,q)[n],this)}}rforEach(t,l=this){for(const n of E(this,je,Xe).call(this)){const o=d(this,P)[n],i=E(this,U,G).call(this,o)?o.__staleWhileFetching:o;i!==void 0&&t.call(l,i,d(this,q)[n],this)}}purgeStale(){let t=!1;for(const l of E(this,je,Xe).call(this,{allowStale:!0}))d(this,$e).call(this,l)&&(E(this,Ve,Ke).call(this,d(this,q)[l],"expire"),t=!0);return t}info(t){const l=d(this,ne).get(t);if(l===void 0)return;const n=d(this,P)[l],o=E(this,U,G).call(this,n)?n.__staleWhileFetching:n;if(o===void 0)return;const i={value:o};if(d(this,Te)&&d(this,Oe)){const a=d(this,Te)[l],u=d(this,Oe)[l];if(a&&u){const r=a-(at.now()-u);i.ttl=r,i.start=Date.now()}}return d(this,Me)&&(i.size=d(this,Me)[l]),i}dump(){const t=[];for(const l of E(this,Be,qe).call(this,{allowStale:!0})){const n=d(this,q)[l],o=d(this,P)[l],i=E(this,U,G).call(this,o)?o.__staleWhileFetching:o;if(i===void 0||n===void 0)continue;const a={value:i};if(d(this,Te)&&d(this,Oe)){a.ttl=d(this,Te)[l];const u=at.now()-d(this,Oe)[l];a.start=Math.floor(Date.now()-u)}d(this,Me)&&(a.size=d(this,Me)[l]),t.unshift([n,a])}return t}load(t){this.clear();for(const[l,n]of t){if(n.start){const o=Date.now()-n.start;n.start=at.now()-o}this.set(l,n.value,n)}}set(t,l,n={}){var g,v,C,T,w,k,p;if(l===void 0)return this.delete(t),this;const{ttl:o=this.ttl,start:i,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:r}=n;let{noUpdateTTL:f=this.noUpdateTTL}=n;const h=d(this,Lt).call(this,t,l,n.size||0,u);if(this.maxEntrySize&&h>this.maxEntrySize)return r&&(r.set="miss",r.maxEntrySizeExceeded=!0),E(this,Ve,Ke).call(this,t,"set"),this;let s=d(this,ie)===0?void 0:d(this,ne).get(t);if(s===void 0)s=d(this,ie)===0?d(this,re):d(this,He).length!==0?d(this,He).pop():d(this,ie)===d(this,Le)?E(this,yt,Gt).call(this,!1):d(this,ie),d(this,q)[s]=t,d(this,P)[s]=l,d(this,ne).set(t,s),d(this,ve)[d(this,re)]=s,d(this,Ce)[s]=d(this,re),I(this,re,s),Mt(this,ie)._++,d(this,bt).call(this,s,h,r),r&&(r.set="add"),f=!1,d(this,pt)&&((g=d(this,Je))==null||g.call(this,l,t,"add"));else{E(this,lt,Ct).call(this,s);const b=d(this,P)[s];if(l!==b){if(d(this,Ze)&&E(this,U,G).call(this,b)){b.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:$}=b;$!==void 0&&!a&&(d(this,De)&&((v=d(this,Ie))==null||v.call(this,$,t,"set")),d(this,pe)&&((C=d(this,se))==null||C.push([$,t,"set"])))}else a||(d(this,De)&&((T=d(this,Ie))==null||T.call(this,b,t,"set")),d(this,pe)&&((w=d(this,se))==null||w.push([b,t,"set"])));if(d(this,tt).call(this,s),d(this,bt).call(this,s,h,r),d(this,P)[s]=l,r){r.set="replace";const $=b&&E(this,U,G).call(this,b)?b.__staleWhileFetching:b;$!==void 0&&(r.oldValue=$)}}else r&&(r.set="update");d(this,pt)&&((k=this.onInsert)==null||k.call(this,l,t,l===b?"update":"replace"))}if(o!==0&&!d(this,Te)&&E(this,Et,kl).call(this),d(this,Te)&&(f||d(this,At).call(this,s,o,i),r&&d(this,ze).call(this,r,s)),!a&&d(this,pe)&&d(this,se)){const b=d(this,se);let $;for(;$=b==null?void 0:b.shift();)(p=d(this,Fe))==null||p.call(this,...$)}return this}pop(){var t;try{for(;d(this,ie);){const l=d(this,P)[d(this,me)];if(E(this,yt,Gt).call(this,!0),E(this,U,G).call(this,l)){if(l.__staleWhileFetching)return l.__staleWhileFetching}else if(l!==void 0)return l}}finally{if(d(this,pe)&&d(this,se)){const l=d(this,se);let n;for(;n=l==null?void 0:l.shift();)(t=d(this,Fe))==null||t.call(this,...n)}}}has(t,l={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:o}=l,i=d(this,ne).get(t);if(i!==void 0){const a=d(this,P)[i];if(E(this,U,G).call(this,a)&&a.__staleWhileFetching===void 0)return!1;if(d(this,$e).call(this,i))o&&(o.has="stale",d(this,ze).call(this,o,i));else return n&&d(this,et).call(this,i),o&&(o.has="hit",d(this,ze).call(this,o,i)),!0}else o&&(o.has="miss");return!1}peek(t,l={}){const{allowStale:n=this.allowStale}=l,o=d(this,ne).get(t);if(o===void 0||!n&&d(this,$e).call(this,o))return;const i=d(this,P)[o];return E(this,U,G).call(this,i)?i.__staleWhileFetching:i}async fetch(t,l={}){const{allowStale:n=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:r=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:s=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:v=this.ignoreFetchAbort,allowStaleOnFetchAbort:C=this.allowStaleOnFetchAbort,context:T,forceRefresh:w=!1,status:k,signal:p}=l;if(!d(this,Ze))return k&&(k.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:o,noDeleteOnStaleGet:i,status:k});const b={allowStale:n,updateAgeOnGet:o,noDeleteOnStaleGet:i,ttl:a,noDisposeOnSet:u,size:r,sizeCalculation:f,noUpdateTTL:h,noDeleteOnFetchRejection:s,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:C,ignoreFetchAbort:v,status:k,signal:p};let $=d(this,ne).get(t);if($===void 0){k&&(k.fetch="miss");const y=E(this,wt,qt).call(this,t,$,b,T);return y.__returned=y}else{const y=d(this,P)[$];if(E(this,U,G).call(this,y)){const F=n&&y.__staleWhileFetching!==void 0;return k&&(k.fetch="inflight",F&&(k.returnedStale=!0)),F?y.__staleWhileFetching:y.__returned=y}const _=d(this,$e).call(this,$);if(!w&&!_)return k&&(k.fetch="hit"),E(this,lt,Ct).call(this,$),o&&d(this,et).call(this,$),k&&d(this,ze).call(this,k,$),y;const H=E(this,wt,qt).call(this,t,$,b,T),A=H.__staleWhileFetching!==void 0&&n;return k&&(k.fetch=_?"stale":"refresh",A&&_&&(k.returnedStale=!0)),A?H.__staleWhileFetching:H.__returned=H}}async forceFetch(t,l={}){const n=await this.fetch(t,l);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(t,l={}){const n=d(this,vt);if(!n)throw new Error("no memoMethod provided to constructor");const{context:o,forceRefresh:i,...a}=l,u=this.get(t,a);if(!i&&u!==void 0)return u;const r=n(t,u,{options:a,context:o});return this.set(t,r,a),r}get(t,l={}){const{allowStale:n=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:a}=l,u=d(this,ne).get(t);if(u!==void 0){const r=d(this,P)[u],f=E(this,U,G).call(this,r);return a&&d(this,ze).call(this,a,u),d(this,$e).call(this,u)?(a&&(a.get="stale"),f?(a&&n&&r.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?r.__staleWhileFetching:void 0):(i||E(this,Ve,Ke).call(this,t,"expire"),a&&n&&(a.returnedStale=!0),n?r:void 0)):(a&&(a.get="hit"),f?r.__staleWhileFetching:(E(this,lt,Ct).call(this,u),o&&d(this,et).call(this,u),r))}else a&&(a.get="miss")}delete(t){return E(this,Ve,Ke).call(this,t,"delete")}clear(){return E(this,Rt,$l).call(this,"delete")}};let wl=Il;Rc=Symbol.toStringTag,Le=new WeakMap,ke=new WeakMap,Ie=new WeakMap,Je=new WeakMap,Fe=new WeakMap,gt=new WeakMap,vt=new WeakMap,ie=new WeakMap,Re=new WeakMap,ne=new WeakMap,q=new WeakMap,P=new WeakMap,ve=new WeakMap,Ce=new WeakMap,me=new WeakMap,re=new WeakMap,He=new WeakMap,se=new WeakMap,Me=new WeakMap,Oe=new WeakMap,Te=new WeakMap,De=new WeakMap,Ze=new WeakMap,pe=new WeakMap,pt=new WeakMap,Et=new WeakSet,kl=function(){const t=new Wt(d(this,Le)),l=new Wt(d(this,Le));I(this,Te,t),I(this,Oe,l),I(this,At,(i,a,u=at.now())=>{if(l[i]=a!==0?u:0,t[i]=a,a!==0&&this.ttlAutopurge){const r=setTimeout(()=>{d(this,$e).call(this,i)&&E(this,Ve,Ke).call(this,d(this,q)[i],"expire")},a+1);r.unref&&r.unref()}}),I(this,et,i=>{l[i]=t[i]!==0?at.now():0}),I(this,ze,(i,a)=>{if(t[a]){const u=t[a],r=l[a];if(!u||!r)return;i.ttl=u,i.start=r,i.now=n||o();const f=i.now-r;i.remainingTTL=u-f}});let n=0;const o=()=>{const i=at.now();if(this.ttlResolution>0){n=i;const a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return i};this.getRemainingTTL=i=>{const a=d(this,ne).get(i);if(a===void 0)return 0;const u=t[a],r=l[a];if(!u||!r)return 1/0;const f=(n||o())-r;return u-f},I(this,$e,i=>{const a=l[i],u=t[i];return!!u&&!!a&&(n||o())-a>u})},et=new WeakMap,ze=new WeakMap,At=new WeakMap,$e=new WeakMap,nl=new WeakSet,No=function(){const t=new Wt(d(this,Le));I(this,Re,0),I(this,Me,t),I(this,tt,l=>{I(this,Re,d(this,Re)-t[l]),t[l]=0}),I(this,Lt,(l,n,o,i)=>{if(E(this,U,G).call(this,n))return 0;if(!Ge(o))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(o=i(n,l),!Ge(o))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return o}),I(this,bt,(l,n,o)=>{if(t[l]=n,d(this,ke)){const i=d(this,ke)-t[l];for(;d(this,Re)>i;)E(this,yt,Gt).call(this,!0)}I(this,Re,d(this,Re)+t[l]),o&&(o.entrySize=n,o.totalCalculatedSize=d(this,Re))})},tt=new WeakMap,bt=new WeakMap,Lt=new WeakMap,Be=new WeakSet,qe=function*({allowStale:t=this.allowStale}={}){if(d(this,ie))for(let l=d(this,re);!(!E(this,It,Cl).call(this,l)||((t||!d(this,$e).call(this,l))&&(yield l),l===d(this,me)));)l=d(this,Ce)[l]},je=new WeakSet,Xe=function*({allowStale:t=this.allowStale}={}){if(d(this,ie))for(let l=d(this,me);!(!E(this,It,Cl).call(this,l)||((t||!d(this,$e).call(this,l))&&(yield l),l===d(this,re)));)l=d(this,ve)[l]},It=new WeakSet,Cl=function(t){return t!==void 0&&d(this,ne).get(d(this,q)[t])===t},yt=new WeakSet,Gt=function(t){var i,a;const l=d(this,me),n=d(this,q)[l],o=d(this,P)[l];return d(this,Ze)&&E(this,U,G).call(this,o)?o.__abortController.abort(new Error("evicted")):(d(this,De)||d(this,pe))&&(d(this,De)&&((i=d(this,Ie))==null||i.call(this,o,n,"evict")),d(this,pe)&&((a=d(this,se))==null||a.push([o,n,"evict"]))),d(this,tt).call(this,l),t&&(d(this,q)[l]=void 0,d(this,P)[l]=void 0,d(this,He).push(l)),d(this,ie)===1?(I(this,me,I(this,re,0)),d(this,He).length=0):I(this,me,d(this,ve)[l]),d(this,ne).delete(n),Mt(this,ie)._--,l},wt=new WeakSet,qt=function(t,l,n,o){const i=l===void 0?void 0:d(this,P)[l];if(E(this,U,G).call(this,i))return i;const a=new el,{signal:u}=n;u==null||u.addEventListener("abort",()=>a.abort(u.reason),{signal:a.signal});const r={signal:a.signal,options:n,context:o},f=(T,w=!1)=>{const{aborted:k}=a.signal,p=n.ignoreFetchAbort&&T!==void 0;if(n.status&&(k&&!w?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,p&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),k&&!p&&!w)return s(a.signal.reason);const b=v;return d(this,P)[l]===v&&(T===void 0?b.__staleWhileFetching?d(this,P)[l]=b.__staleWhileFetching:E(this,Ve,Ke).call(this,t,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(t,T,r.options))),T},h=T=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=T),s(T)),s=T=>{const{aborted:w}=a.signal,k=w&&n.allowStaleOnFetchAbort,p=k||n.allowStaleOnFetchRejection,b=p||n.noDeleteOnFetchRejection,$=v;if(d(this,P)[l]===v&&(!b||$.__staleWhileFetching===void 0?E(this,Ve,Ke).call(this,t,"fetch"):k||(d(this,P)[l]=$.__staleWhileFetching)),p)return n.status&&$.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),$.__staleWhileFetching;if($.__returned===$)throw T},g=(T,w)=>{var p;const k=(p=d(this,gt))==null?void 0:p.call(this,t,i,r);k&&k instanceof Promise&&k.then(b=>T(b===void 0?void 0:b),w),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(T(void 0),n.allowStaleOnFetchAbort&&(T=b=>f(b,!0)))})};n.status&&(n.status.fetchDispatched=!0);const v=new Promise(g).then(f,h),C=Object.assign(v,{__abortController:a,__staleWhileFetching:i,__returned:void 0});return l===void 0?(this.set(t,C,{...r.options,status:void 0}),l=d(this,ne).get(t)):d(this,P)[l]=C,C},U=new WeakSet,G=function(t){if(!d(this,Ze))return!1;const l=t;return!!l&&l instanceof Promise&&l.hasOwnProperty("__staleWhileFetching")&&l.__abortController instanceof el},Ft=new WeakSet,Tl=function(t,l){d(this,Ce)[l]=t,d(this,ve)[t]=l},lt=new WeakSet,Ct=function(t){t!==d(this,re)&&(t===d(this,me)?I(this,me,d(this,ve)[t]):E(this,Ft,Tl).call(this,d(this,Ce)[t],d(this,ve)[t]),E(this,Ft,Tl).call(this,d(this,re),t),I(this,re,t))},Ve=new WeakSet,Ke=function(t,l){var o,i,a,u;let n=!1;if(d(this,ie)!==0){const r=d(this,ne).get(t);if(r!==void 0)if(n=!0,d(this,ie)===1)E(this,Rt,$l).call(this,l);else{d(this,tt).call(this,r);const f=d(this,P)[r];if(E(this,U,G).call(this,f)?f.__abortController.abort(new Error("deleted")):(d(this,De)||d(this,pe))&&(d(this,De)&&((o=d(this,Ie))==null||o.call(this,f,t,l)),d(this,pe)&&((i=d(this,se))==null||i.push([f,t,l]))),d(this,ne).delete(t),d(this,q)[r]=void 0,d(this,P)[r]=void 0,r===d(this,re))I(this,re,d(this,Ce)[r]);else if(r===d(this,me))I(this,me,d(this,ve)[r]);else{const h=d(this,Ce)[r];d(this,ve)[h]=d(this,ve)[r];const s=d(this,ve)[r];d(this,Ce)[s]=d(this,Ce)[r]}Mt(this,ie)._--,d(this,He).push(r)}}if(d(this,pe)&&((a=d(this,se))!=null&&a.length)){const r=d(this,se);let f;for(;f=r==null?void 0:r.shift();)(u=d(this,Fe))==null||u.call(this,...f)}return n},Rt=new WeakSet,$l=function(t){var l,n,o;for(const i of E(this,je,Xe).call(this,{allowStale:!0})){const a=d(this,P)[i];if(E(this,U,G).call(this,a))a.__abortController.abort(new Error("deleted"));else{const u=d(this,q)[i];d(this,De)&&((l=d(this,Ie))==null||l.call(this,a,u,t)),d(this,pe)&&((n=d(this,se))==null||n.push([a,u,t]))}}if(d(this,ne).clear(),d(this,P).fill(void 0),d(this,q).fill(void 0),d(this,Te)&&d(this,Oe)&&(d(this,Te).fill(0),d(this,Oe).fill(0)),d(this,Me)&&d(this,Me).fill(0),I(this,me,0),I(this,re,0),d(this,He).length=0,I(this,Re,0),I(this,ie,0),d(this,pe)&&d(this,se)){const i=d(this,se);let a;for(;a=i==null?void 0:i.shift();)(o=d(this,Fe))==null||o.call(this,...a)}};const Ae={hljs:`${c}-hljs`,hlcss:`${c}-hlCss`,prettier:`${c}-prettier`,prettierMD:`${c}-prettierMD`,cropperjs:`${c}-cropper`,croppercss:`${c}-cropperCss`,screenfull:`${c}-screenfull`,mermaidM:`${c}-mermaid-m`,mermaid:`${c}-mermaid`,katexjs:`${c}-katex`,katexcss:`${c}-katexCss`},Fa=(e,t)=>{const l=R("editorId"),{noImgZoomIn:n}=e,o=ko(()=>{const i=document.querySelectorAll(`#${l}-preview img:not(.not-zoom):not(.medium-zoom-image)`);i.length!==0&&Fi(i,{background:"#00000073"})});Z(()=>{!n&&e.setting.preview&&o()}),D([t,Ne(e.setting,"preview")],()=>{!n&&e.setting.preview&&o()})},Ra=(e,t,l)=>{const n=R("editorId"),o=R("rootRef"),i=R("usedLanguageText"),a=()=>{o.value.querySelectorAll(`#${n} .${c}-preview .${c}-code`).forEach(f=>{let h=-1;const s=f.querySelector(`.${c}-copy-button`);s&&(s.onclick=g=>{g.preventDefault(),clearTimeout(h);const C=(f.querySelector("input:checked + pre code")||f.querySelector("pre code")).textContent,{text:T,successTips:w,failTips:k}=i.value.copyCode;let p=w;ci(e.formatCopiedText(C)).catch(()=>{p=k}).finally(()=>{s.dataset.isIcon?s.dataset.tips=p:s.innerHTML=p,h=window.setTimeout(()=>{s.dataset.isIcon?s.dataset.tips=T:s.innerHTML=T},1500)})})})},u=()=>{Pe(a)},r=f=>{f&&Pe(a)};D([t,l],u),D(()=>e.setting.preview,r),D(()=>e.setting.htmlPreview,r),Z(a)},Ha=e=>{const t=R("highlight"),l=nt(oe.editorExtensions.highlight.instance);return Z(()=>{e.noHighlight||l.value||(Ee("link",{...t.value.css,rel:"stylesheet",id:Ae.hlcss}),Ee("script",{...t.value.js,id:Ae.hljs,onload(){l.value=window.hljs}},"hljs"))}),D(()=>t.value.css,()=>{e.noHighlight||oe.editorExtensions.highlight.instance||xa("link",{...t.value.css,rel:"stylesheet",id:Ae.hlcss})}),l},Xt=new wl({max:1e3,ttl:6e5}),Ma=e=>{const t=R("editorId"),l=R("theme"),n=R("rootRef"),{editorExtensions:o,editorExtensionsAttrs:i,mermaidConfig:a}=oe;let u=o.mermaid.instance;const r=nt(-1),f=()=>{!e.noMermaid&&u&&(u.initialize(a({startOnLoad:!1,theme:l.value==="dark"?"dark":"default"})),r.value=r.value+1)};return D(()=>l.value,()=>{Xt.clear(),f()}),Z(()=>{var s,g;if(e.noMermaid||u)return;const v=o.mermaid.js;/\.mjs/.test(v)?(Ee("link",{...(s=i.mermaid)==null?void 0:s.js,rel:"modulepreload",href:v,id:Ae.mermaidM}),vi(()=>import(v),[],import.meta.url).then(C=>{u=C.default,f()})):Ee("script",{...(g=i.mermaid)==null?void 0:g.js,src:v,id:Ae.mermaid,onload(){u=window.mermaid,f()}},"mermaid")}),{reRenderRef:r,replaceMermaid:async()=>{if(!e.noMermaid&&u){const s=n.value.querySelectorAll(`div.${c}-mermaid`),g=document.createElement("div"),v=document.body.offsetWidth>1366?document.body.offsetWidth:1366,C=document.body.offsetHeight>768?document.body.offsetHeight:768;g.style.width=v+"px",g.style.height=C+"px",g.style.position="fixed",g.style.zIndex="-10000",g.style.top="-10000";let T=s.length;T>0&&document.body.appendChild(g),await Promise.allSettled(Array.from(s).map(w=>(async p=>{var b;if(p.dataset.closed==="false")return!1;const $=p.innerText;let y=Xt.get($);if(!y){const _=vl();let H={svg:""};try{H=await u.render(_,$,g),y=await e.sanitizeMermaid(H.svg);const L=document.createElement("p");L.className=`${c}-mermaid`,L.setAttribute("data-processed",""),L.innerHTML=y,(b=L.children[0])==null||b.removeAttribute("height"),Xt.set($,L.innerHTML),p.dataset.line!==void 0&&(L.dataset.line=p.dataset.line),p.replaceWith(L)}catch(L){x.emit(t,Qe,{name:"mermaid",message:L.message,error:L})}--T===0&&g.remove()}})(w)))}}}},Oa=e=>{const t=nt(oe.editorExtensions.katex.instance);return Z(()=>{var l,n;if(e.noKatex||t.value)return;const{editorExtensions:o,editorExtensionsAttrs:i}=oe;Ee("script",{...(l=i.katex)==null?void 0:l.js,src:o.katex.js,id:Ae.katexjs,onload(){t.value=window.katex}},"katex"),Ee("link",{...(n=i.katex)==null?void 0:n.css,rel:"stylesheet",href:o.katex.css,id:Ae.katexcss})}),t},Da=(e,t)=>{const l=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(n,o,i,a,u)=>{var r;const f=n[o],h=f.content.trim();if(f.info==="mermaid"){if(f.attrSet("class",`${c}-mermaid`),f.attrSet("data-mermaid-theme",t.themeRef.value),f.map&&f.level===0){const g=f.map[1]-1,v=(r=a.srcLines[g])==null?void 0:r.trim(),C=v==null?void 0:v.startsWith("```");f.attrSet("data-closed",C),f.attrSet("data-line",String(f.map[0]))}const s=Xt.get(h);return s?(f.attrSet("data-processed",""),`<p ${u.renderAttrs(f)}>${s}</p>`):`<div ${u.renderAttrs(f)}>${e.utils.escapeHtml(h)}</div>`}return l(n,o,i,a,u)}},tl=(e,t)=>{const l=e.attrs?e.attrs.slice():[];return t.forEach(n=>{const o=e.attrIndex(n[0]);o<0?l.push(n):(l[o]=l[o].slice(),l[o][1]+=` ${n[1]}`)}),l},Zn={block:[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}],inline:[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}]},Na=e=>(t,l)=>{const n=e.delimiters;let o,i,a;for(const u of n)if(t.src.startsWith(u.open,t.pos)){const r=t.pos+u.open.length;for(o=r;(o=t.src.indexOf(u.close,o))!==-1;){for(a=o-1;t.src[a]==="\\";)a-=1;if((o-a)%2===1)break;o+=u.close.length}if(o===-1)return l||(t.pending+=u.open),t.pos=r,!0;if(o-r===0)return l||(t.pending+=u.open+u.close),t.pos=r+u.close.length,!0;if(!l){const f=t.src.slice(r,o);i=t.push("math_inline","math",0),i.markup=u.open,i.content=f}return t.pos=o+u.close.length,!0}return!1},Pa=e=>(t,l,n,o)=>{const i=e.delimiters;let a,u,r,f,h=!1,s=t.bMarks[l]+t.tShift[l],g=t.eMarks[l];for(const v of i)if(t.src.slice(s,s+v.open.length)===v.open&&t.src.slice(g-v.close.length,g)===v.close){if(s+=v.open.length,a=t.src.slice(s,g),o)return!0;for(a.trim().slice(-v.close.length)===v.close&&(a=a.trim().slice(0,-v.close.length),h=!0),r=l;!h&&(r++,!(r>=n||(s=t.bMarks[r]+t.tShift[r],g=t.eMarks[r],s<g&&t.tShift[r]<t.blkIndent)));)t.src.slice(s,g).trim().slice(-v.close.length)===v.close&&(f=t.src.slice(0,g).lastIndexOf(v.close),u=t.src.slice(s,f),h=!0);t.line=r+1;const C=t.push("math_block","math",0);return C.block=!0,C.content=(a&&a.trim()?a+`
`:"")+t.getLines(l+1,r,t.tShift[l],!0)+(u&&u.trim()?u:""),C.map=[l,t.line],C.markup=v.open,!0}return!1},Ba=(e,{katexRef:t,inlineDelimiters:l,blockDelimiters:n})=>{const o=(a,u,r,f,h)=>{const s=a[u],g={attrs:tl(s,[["class",`${c}-katex-inline`]])};if(t.value){const v=t.value.renderToString(s.content,oe.katexConfig({throwOnError:!1}));return`<span ${h.renderAttrs(g)} data-processed>${v}</span>`}else return`<span ${h.renderAttrs(g)}>${s.content}</span>`},i=(a,u,r,f,h)=>{const s=a[u],g={attrs:tl(s,[["class",`${c}-katex-block`]])};if(t.value){const v=t.value.renderToString(s.content,oe.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${h.renderAttrs(g)} data-processed>${v}</p>`}else return`<p ${h.renderAttrs(g)}>${s.content}</p>`};e.inline.ruler.before("escape","math_inline",Na({delimiters:l||Zn.inline})),e.block.ruler.after("blockquote","math_block",Pa({delimiters:n||Zn.block}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=o,e.renderer.rules.math_block=i},ja=(e,t)=>{t=t||{};const l=3,n=t.marker||"!",o=n.charCodeAt(0),i=n.length;let a="",u="";const r=(h,s,g,v,C)=>{const T=h[s];return T.type==="admonition_open"?h[s].attrPush(["class",`${c}-admonition ${c}-admonition-${T.info}`]):T.type==="admonition_title_open"&&h[s].attrPush(["class",`${c}-admonition-title`]),C.renderToken(h,s,g)},f=h=>{const s=h.trim().split(" ",2);u="",a=s[0],s.length>1&&(u=h.substring(a.length+2))};e.block.ruler.before("code","admonition",(h,s,g,v)=>{let C,T,w,k=!1,p=h.bMarks[s]+h.tShift[s],b=h.eMarks[s];if(o!==h.src.charCodeAt(p))return!1;for(C=p+1;C<=b&&n[(C-p)%i]===h.src[C];C++);const $=Math.floor((C-p)/i);if($!==l)return!1;C-=(C-p)%i;const y=h.src.slice(p,C),_=h.src.slice(C,b);if(f(_),v)return!0;for(T=s;T++,!(T>=g||(p=h.bMarks[T]+h.tShift[T],b=h.eMarks[T],p<b&&h.sCount[T]<h.blkIndent));)if(o===h.src.charCodeAt(p)&&!(h.sCount[T]-h.blkIndent>=4)){for(C=p+1;C<=b&&n[(C-p)%i]===h.src[C];C++);if(!(Math.floor((C-p)/i)<$)&&(C-=(C-p)%i,C=h.skipSpaces(C),!(C<b))){k=!0;break}}const H=h.parentType,L=h.lineMax;return h.parentType="root",h.lineMax=T,w=h.push("admonition_open","div",1),w.markup=y,w.block=!0,w.info=a,w.map=[s,T],u&&(w=h.push("admonition_title_open","p",1),w.markup=y+" "+a,w.map=[s,T],w=h.push("inline","",0),w.content=u,w.map=[s,h.line-1],w.children=[],w=h.push("admonition_title_close","p",-1),w.markup=y+" "+a),h.md.block.tokenize(h,s+1,T),w=h.push("admonition_close","div",-1),w.markup=h.src.slice(p,C),w.block=!0,h.parentType=H,h.lineMax=L,h.line=T+(k?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=r,e.renderer.rules.admonition_title_open=r,e.renderer.rules.admonition_title_close=r,e.renderer.rules.admonition_close=r},Va=(e,t)=>{e.renderer.rules.heading_open=(l,n)=>{var o;const i=l[n],a=((o=l[n+1].children)==null?void 0:o.reduce((r,f)=>r+(["text","code_inline","math_inline"].includes(f.type)&&f.content||""),""))||"",u=i.markup.length;return t.headsRef.value.push({text:a,level:u,line:i.map[0]}),i.map&&i.level===0&&i.attrSet("id",t.mdHeadingId(a,u,t.headsRef.value.length)),e.renderer.renderToken(l,n,t)},e.renderer.rules.heading_close=(l,n,o,i,a)=>a.renderToken(l,n,o)},za=(e,t)=>{const l=e.renderer.rules.fence,n=e.utils.unescapeAll,o=/\[(\w*)(?::([\w ]*))?\]/,i=/::(open|close)/,a=s=>s.info?n(s.info).trim():"",u=s=>{const g=a(s),[v=null,C=""]=(o.exec(g)||[]).slice(1);return[v,C]},r=s=>{const g=a(s);return g?g.split(/(\s+)/g)[0]:""},f=s=>{const g=s.info.match(i)||[],v=g[1]==="open"||g[1]!=="close"&&t.codeFoldable&&s.content.trim().split(`
`).length<t.autoFoldThreshold,C=g[1]||t.codeFoldable?"details":"div",T=g[1]||t.codeFoldable?"summary":"div";return{open:v,tagContainer:C,tagHeader:T}},h=(s,g,v,C,T)=>{var w;if(s[g].hidden)return"";const k=(w=t.usedLanguageTextRef.value)==null?void 0:w.copyCode.text,p=t.customIconRef.value.copy||k,b=!!t.customIconRef.value.copy,$=`<span class="${c}-collapse-tips">${zt("collapse-tips",t.customIconRef.value)}</span>`,[y]=u(s[g]);if(y===null){const{open:te,tagContainer:ae,tagHeader:xe}=f(s[g]),we=[["class",`${c}-code`]];te&&we.push(["open",""]);const ge={attrs:tl(s[g],we)};s[g].info=s[g].info.replace(i,"");const ee=l(s,g,v,C,T);return`
        <${ae} ${T.renderAttrs(ge)}>
          <${xe} class="${c}-code-head">
            <div class="${c}-code-flag"><span></span><span></span><span></span></div>
            <div class="${c}-code-action">
              <span class="${c}-code-lang">${e.utils.escapeHtml(s[g].info.trim())}</span>
              <span class="${c}-copy-button" data-tips="${k}"${b?" data-is-icon=true":""}>${p}</span>
              ${t.extraTools instanceof Function?t.extraTools({lang:s[g].info.trim()}):t.extraTools||""}
              ${ae==="details"?$:""}
            </div>
          </${xe}>
          ${ee}
        </${ae}>
      `}let _,H,L,A,F="",B="",M="";const{open:z,tagContainer:le,tagHeader:J}=f(s[g]),ue=[["class",`${c}-code`]];z&&ue.push(["open",""]);const de={attrs:tl(s[g],ue)};for(let te=g;te<s.length&&(_=s[te],[H,L]=u(_),H===y);te++){_.info=_.info.replace(o,"").replace(i,""),_.hidden=!0;const ae=`${c}-codetab-${t.editorId}-${g}-${te-g}`;A=te-g>0?"":"checked",F+=`
        <li>
          <input
            type="radio"
            id="label-${c}-codetab-label-1-${t.editorId}-${g}-${te-g}"
            name="${c}-codetab-label-${t.editorId}-${g}"
            class="${ae}"
            ${A}
          >
          <label
            for="label-${c}-codetab-label-1-${t.editorId}-${g}-${te-g}"
            onclick="this.getRootNode().querySelectorAll('.${ae}').forEach(e => e.click())"
          >
            ${e.utils.escapeHtml(L||r(_))}
          </label>
        </li>`,B+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${c}-codetab-pre-${t.editorId}-${g}"
            class="${ae}"
            ${A}
            role="presentation">
          ${l(s,te,v,C,T)}
        </div>`,M+=`
        <input
          type="radio"
          name="${c}-codetab-lang-${t.editorId}-${g}"
          class="${ae}"
          ${A}
          role="presentation">
        <span class=${c}-code-lang role="note">${e.utils.escapeHtml(r(_))}</span>`}return`
      <${le} ${T.renderAttrs(de)}>
        <${J} class="${c}-code-head">
          <div class="${c}-code-flag">
            <ul class="${c}-codetab-label" role="tablist">${F}</ul>
          </div>
          <div class="${c}-code-action">
            <span class="${c}-codetab-lang">${M}</span>
            <span class="${c}-copy-button" data-tips="${k}"${b?" data-is-icon=true":""}>${p}</span>
            ${t.extraTools instanceof Function?t.extraTools({lang:s[g].info.trim()}):t.extraTools||""}
            ${le==="details"?$:""}
          </div>
        </${J}>
        ${B}
      </${le}>
    `};e.renderer.rules.fence=h,e.renderer.rules.code_block=h},Qn=(e,t,l)=>{const n=e.attrIndex(t),o=[t,l];n<0?e.attrPush(o):(e.attrs=e.attrs||[],e.attrs[n]=o)},Wa=e=>e.type==="inline",Ua=e=>e.type==="paragraph_open",Ga=e=>e.type==="list_item_open",qa=e=>e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0,Xa=(e,t)=>Wa(e[t])&&Ua(e[t-1])&&Ga(e[t-2])&&qa(e[t]),Ka=(e,t)=>{const l=e[t].level-1;for(let n=t-1;n>=0;n--)if(e[n].level===l)return n;return-1},Ya=e=>{const t=new e("html_inline","",0);return t.content="<label>",t},Za=e=>{const t=new e("html_inline","",0);return t.content="</label>",t},Qa=(e,t,l)=>{const n=new l("html_inline","",0);return n.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",n.attrs=[{for:t}],n},Ja=(e,t,l)=>{const n=new t("html_inline","",0),o=l.enabled?" ":' disabled="" ';return e.content.indexOf("[ ] ")===0?n.content='<input class="task-list-item-checkbox"'+o+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(n.content='<input class="task-list-item-checkbox" checked=""'+o+'type="checkbox">'),n},er=(e,t,l)=>{if(e.children=e.children||[],e.children.unshift(Ja(e,t,l)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),l.label)if(l.labelAfter){e.children.pop();const n="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+n+'">',e.children.push(Qa(e.content,n,t))}else e.children.unshift(Ya(t)),e.children.push(Za(t))},tr=(e,t={})=>{e.core.ruler.after("inline","github-task-lists",l=>{const n=l.tokens;for(let o=2;o<n.length;o++)Xa(n,o)&&(er(n[o],l.Token,t),Qn(n[o-2],"class","task-list-item"+(t.enabled?" enabled":" ")),Qn(n[Ka(n,o-2)],"class","contains-task-list"))})},lr=e=>{e.core.ruler.push("init-line-number",t=>(t.tokens.forEach(l=>{l.map&&(l.attrs||(l.attrs=[]),l.attrs.push(["data-line",l.map[0].toString()]))}),!0))},nr=(e,t)=>{const{editorConfig:l,markdownItConfig:n,markdownItPlugins:o,editorExtensions:i}=oe,a=R("editorId"),u=R("language"),r=R("usedLanguageText"),f=R("showCodeRowNumber"),h=R("theme"),s=R("customIcon"),g=R("rootRef"),v=V([]);let C=()=>{};const T=Ha(e),w=Oa(e),{reRenderRef:k,replaceMermaid:p}=Ma(e),b=Ri({html:!0,breaks:!0,linkify:!0});n(b,{editorId:a});const $=[{type:"image",plugin:Hi,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:ja,options:{}},{type:"taskList",plugin:tr,options:{}},{type:"heading",plugin:Va,options:{mdHeadingId:e.mdHeadingId,headsRef:v}},{type:"code",plugin:za,options:{editorId:a,usedLanguageTextRef:r,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:s}},{type:"sub",plugin:Mi,options:{}},{type:"sup",plugin:Oi,options:{}}];e.noKatex||$.push({type:"katex",plugin:Ba,options:{katexRef:w}}),e.noMermaid||$.push({type:"mermaid",plugin:Da,options:{themeRef:h}}),o($,{editorId:a}).forEach(M=>{b.use(M.plugin,M.options)});const y=b.options.highlight;b.set({highlight:(M,z,le)=>{if(y){const de=y(M,z,le);if(de)return de}let J;!e.noHighlight&&T.value?T.value.getLanguage(z)?J=T.value.highlight(M,{language:z,ignoreIllegals:!0}).value:J=T.value.highlightAuto(M).value:J=b.utils.escapeHtml(M);const ue=f?Aa(J.replace(/^\n+|\n+$/g,""),M.replace(/^\n+|\n+$/g,"")):`<span class="${c}-code-block">${J.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${z}" language=${z}>${ue}</code></pre>`}}),lr(b);const _=V(`_article-key_${vl()}`),H=V(e.sanitize(b.render(e.modelValue,{srcLines:e.modelValue.split(`
`)}))),L=()=>{x.emit(a,Vt,H.value),e.onHtmlChanged(H.value),e.onGetCatalog(v.value),x.emit(a,St,v.value),Pe(()=>{p().then(()=>{var M,z;(M=i.mermaid)!=null&&M.enableZoom&&(C(),C=Xn((z=g.value)==null?void 0:z.querySelectorAll(`#${a} p.${c}-mermaid:not([data-closed=false])`),{customIcon:s.value}))})})},A=()=>{v.value=[],H.value=e.sanitize(b.render(e.modelValue,{srcLines:e.modelValue.split(`
`)})),L()},F=ce(()=>(e.noKatex||w.value)&&(e.noHighlight||T.value));let B=-1;return D([Ne(e,"modelValue"),F,k,u],()=>{B=window.setTimeout(()=>{A()},t?0:l.renderDelay)}),D(()=>e.setting.preview,()=>{e.setting.preview&&Pe(()=>{p().then(()=>{var M,z;(M=i.mermaid)!=null&&M.enableZoom&&(C(),C=Xn((z=g.value)==null?void 0:z.querySelectorAll(`#${a} p.${c}-mermaid:not([data-closed=false])`),{customIcon:s.value}))}),x.emit(a,St,v.value)})}),Z(L),Z(()=>{x.on(a,{name:Io,callback(){x.emit(a,St,v.value)}}),x.on(a,{name:_l,callback:()=>{_.value=`_article-key_${vl()}`,A()}})}),ot(()=>{C(),clearTimeout(B)}),{html:H,key:_}},Jn={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},or=(e,t)=>{const l=R("editorId"),n=R("rootRef");let o=()=>{};const i=()=>{if(!n.value)return!1;const a=n.value.querySelectorAll(".task-list-item.enabled"),u=r=>{var f;r.preventDefault();const h=r.target.checked?"unChecked":"checked",s=(f=r.target.parentElement)==null?void 0:f.dataset.line;if(!s)return;const g=Number(s),v=e.modelValue.split(`
`),C=v[Number(g)].replace(Jn[h].regexp,Jn[h].value);e.previewOnly?(v[Number(g)]=C,e.onChange(v.join(`
`))):x.emit(l,Ro,g+1,C)};a.forEach(r=>{r.addEventListener("click",u)}),o=()=>{a.forEach(r=>{r.removeEventListener("click",u)})}};ot(()=>{o()}),D([t],()=>{o(),Pe(i)},{immediate:!0})},ir=(e,t,l)=>{const n=()=>{Pe(()=>{var i;(i=e.onRemount)==null||i.call(e)})},o=i=>{i&&n()};D([t,l],n),D(()=>e.setting.preview,o),D(()=>e.setting.htmlPreview,o),Z(n)},Po={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number},onRemount:{type:Function}},ar={...Po,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWidth:{type:String},oninputBoxWidthChange:{type:Function},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String},catalogMaxDepth:{type:Number}},rr=e=>{const l=new DOMParser().parseFromString(e,"text/html");return Array.from(l.body.childNodes)},sr=(e,t)=>{const l=[],n=[];if(e.forEach((o,i)=>{const a=t[i];if(!a){l.push({index:i,newNode:o});return}(o.nodeType!==a.nodeType||o.textContent!==a.textContent||o.nodeType===1&&o.outerHTML!==a.outerHTML)&&l.push({index:i,newNode:o})}),t.length>e.length)for(let o=e.length;o<t.length;o++)n.push(t[o]);return{updates:l,deletes:n}},cr=K({name:"UpdateOnDemand",props:{html:{type:String,required:!0}},setup(e){const t=R("editorId"),l=R("previewTheme"),n=R("showCodeRowNumber"),o=V(),i=e.html,a=(u,r)=>{o.value&&(r.forEach(f=>{f.remove()}),u.forEach(({index:f,newNode:h})=>{var s,g,v;const C=(s=o.value)==null?void 0:s.childNodes[f];C?(v=o.value)==null||v.replaceChild(h.cloneNode(!0),C):(g=o.value)==null||g.appendChild(h.cloneNode(!0))}))};return D(()=>e.html,u=>{var r;const f=rr(u),h=Array.from(((r=o.value)==null?void 0:r.childNodes)||[]),{updates:s,deletes:g}=sr(f,h);a(s,g)}),()=>m("div",{id:`${t}-preview`,class:[`${c}-preview`,`${l==null?void 0:l.value}-theme`,n&&`${c}-scrn`],innerHTML:i,ref:o},null)}}),Bo=K({name:"ContentPreview",props:Po,setup(e){const t=R("editorId"),{html:l,key:n}=nr(e,e.previewOnly);return Ra(e,l,n),Fa(e,l),or(e,l),ir(e,l,n),()=>m(Ht,null,[e.setting.preview&&m("div",{id:`${t}-preview-wrapper`,class:`${c}-preview-wrapper`,key:"content-preview-wrapper"},[m(cr,{key:n.value,html:l.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&m("div",{id:`${t}-html-wrapper`,class:`${c}-preview-wrapper`,key:"html-preview-wrapper"},[m("div",{class:`${c}-html`},[l.value])])])}}),ur=(e,t,l)=>{const{editorId:n}=l,o=be({buildFinished:!1,html:""});D(()=>e.modelValue,()=>{o.buildFinished=!1}),Z(()=>{x.on(n,{name:Vt,callback(i){o.buildFinished=!0,o.html=i}}),x.on(n,{name:ol,callback(){const i=new Promise(a=>{if(o.buildFinished)a(o.html);else{const u=r=>{a(r),x.remove(n,Vt,u)};x.on(n,{name:Vt,callback:u})}});e.onSave?e.onSave(e.modelValue,i):t.emit("onSave",e.modelValue,i)}})})},jo=(e,t)=>{const l=oe.editorExtensions.highlight,n=oe.editorExtensionsAttrs.highlight,o=pr(e);Se("editorId",o),Se("rootRef",t),Se("theme",ce(()=>e.theme)),Se("language",ce(()=>e.language)),Se("highlight",ce(()=>{const{js:a}=l,u={...pl,...l.css},{js:r,css:f={}}=n||{},h=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme,s=u[e.codeTheme]?u[e.codeTheme][h]:pl.atom[h],g=u[e.codeTheme]&&f[e.codeTheme]?f[e.codeTheme][h]:f.atom?f.atom[h]:{};return{js:{src:a,...r},css:{href:s,...g}}})),Se("showCodeRowNumber",e.showCodeRowNumber);const i=ce(()=>{const a={...Bn,...oe.editorConfig.languageUserDefined};return ri(si(Bn["en-US"]),a[e.language]||{})});return Se("usedLanguageText",i),Se("previewTheme",ce(()=>e.previewTheme)),Se("customIcon",ce(()=>e.customIcon)),{editorId:o}},dr=(e,t)=>(Se("tabWidth",e.tabWidth),Se("disabled",ce(()=>e.disabled)),jo(e,t)),fr=e=>{const{noPrettier:t,noUploadImg:l}=e,{editorExtensions:n,editorExtensionsAttrs:o}=oe,i=t||n.prettier.prettierInstance,a=t||n.prettier.parserMarkdownInstance,u=l||n.cropper.instance;Z(()=>{if(!u){const{js:r={},css:f={}}=o.cropper||{};Ee("link",{...f,rel:"stylesheet",href:n.cropper.css,id:Ae.croppercss}),Ee("script",{...r,src:n.cropper.js,id:Ae.cropperjs})}if(!i){const{standaloneJs:r={}}=o.prettier||{};Ee("script",{...r,src:n.prettier.standaloneJs,id:Ae.prettier})}if(!a){const{parserMarkdownJs:r={}}=o.prettier||{};Ee("script",{...r,src:n.prettier.parserMarkdownJs,id:Ae.prettierMD})}})},hr=(e,t,l)=>{const{editorId:n}=l;Z(()=>{x.on(n,{name:Qe,callback:o=>{var i;(i=e.onError)==null||i.call(e,o),t.emit("onError",o)}})})},mr=(e,t,l)=>{const{editorId:n}=l,o=be({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:e.preview?!1:e.htmlPreview,previewOnly:!1}),i=be({...o}),a=(f,h)=>{const s=h===void 0?!o[f]:h;switch(f){case"preview":{o.htmlPreview=!1,o.previewOnly=!1;break}case"htmlPreview":{o.preview=!1,o.previewOnly=!1;break}case"previewOnly":{s?!o.preview&&!o.htmlPreview&&(o.preview=!0):(i.preview||(o.preview=!1),i.htmlPreview||(o.htmlPreview=!1));break}}i[f]=s,o[f]=s};let u="";const r=()=>{o.pageFullscreen||o.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=u};return D(()=>[o.pageFullscreen,o.fullscreen],r),Z(()=>{x.on(n,{name:il,callback(f,h){const s=g=>{x.emit(n,W,"image",{desc:"",urls:g}),h==null||h()};e.onUploadImg?e.onUploadImg(f,s):t.emit("onUploadImg",f,s)}}),u=document.body.style.overflow,r()}),[o,a]},gr=(e,t)=>{const{editorId:l}=t,n=V(!1);return Z(()=>{x.on(l,{name:xl,callback:o=>{o===void 0?n.value=!n.value:n.value=o}})}),n},vr=(e,t,l)=>{const{editorId:n,catalogVisible:o,setting:i,updateSetting:a,codeRef:u}=l;D(()=>i.pageFullscreen,f=>{x.emit(n,jn,f)}),D(()=>i.fullscreen,f=>{x.emit(n,Vn,f)}),D(()=>i.preview,f=>{x.emit(n,zn,f)}),D(()=>i.previewOnly,f=>{x.emit(n,Wn,f)}),D(()=>i.htmlPreview,f=>{x.emit(n,Un,f)}),D(o,f=>{x.emit(n,Gn,f)});const r={on(f,h){switch(f){case"pageFullscreen":{x.on(n,{name:jn,callback(s){h(s)}});break}case"fullscreen":{x.on(n,{name:Vn,callback(s){h(s)}});break}case"preview":{x.on(n,{name:zn,callback(s){h(s)}});break}case"previewOnly":{x.on(n,{name:Wn,callback(s){h(s)}});break}case"htmlPreview":{x.on(n,{name:Un,callback(s){h(s)}});break}case"catalog":{x.on(n,{name:Gn,callback(s){h(s)}});break}}},togglePageFullscreen(f){a("pageFullscreen",f)},toggleFullscreen(f){x.emit(n,Eo,f)},togglePreview(f){a("preview",f)},togglePreviewOnly(f){a("previewOnly",f)},toggleHtmlPreview(f){a("htmlPreview",f)},toggleCatalog(f){x.emit(n,xl,f)},triggerSave(){x.emit(n,ol)},insert(f){x.emit(n,W,"universal",{generate:f})},focus(f){var h;(h=u.value)==null||h.focus(f)},rerender(){x.emit(n,_l)},getSelectedText(){var f;return(f=u.value)==null?void 0:f.getSelectedText()},resetHistory(){var f;(f=u.value)==null||f.resetHistory()},domEventHandlers(f){x.emit(n,Fo,f)},execCommand(f){x.emit(n,W,f)},getEditorView(){var f;return(f=u.value)==null?void 0:f.getEditorView()}};t.expose(r)},pr=e=>{const t=hi();return e.id||e.editorId||`${c}-${t}`},br=e=>e,Vo={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:void 0},id:{type:String,default:void 0},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:br},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30},onRemount:{type:Function,default:void 0}},yr={...Vo,onSave:{type:Function,default:void 0},onUploadImg:{type:Function,default:void 0},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:xo},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object],default:void 0},onError:{type:Function,default:void 0},footers:{type:Array,default:_o},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object],default:void 0},noUploadImg:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},maxLength:{type:Number,default:void 0},autoDetectCode:{type:Boolean,default:!1},onBlur:{type:Function,default:void 0},onFocus:{type:Function,default:void 0},completions:{type:Array,default:void 0},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function,default:void 0},onDrop:{type:Function,default:void 0},inputBoxWidth:{type:String,default:"50%"},oninputBoxWidthChange:{type:Function,default:void 0},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String,default:"fixed"},catalogMaxDepth:{type:Number,default:void 0},insertLinkDirect:{type:Boolean,default:!1}},zo=["onHtmlChanged","onGetCatalog","onChange","onRemount","update:modelValue"],wr=[...zo,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","oninputBoxWidthChange"],kr=(e,t,l)=>{const{editorId:n}=l,o={rerender(){x.emit(n,_l)}};t.expose(o)},Kt=K({name:"MdPreview",props:Vo,emits:zo,setup(e,t){const{noKatex:l,noMermaid:n,noHighlight:o}=e,i=V(),{editorId:a}=jo(e,i);return kr(e,t,{editorId:a}),ot(()=>{x.clear(a)}),()=>m("div",{id:a,class:[c,e.class,e.theme==="dark"&&`${c}-dark`,`${c}-previewOnly`],style:e.style,ref:i},[m(Bo,{modelValue:e.modelValue,onChange:u=>{var r;(r=e.onChange)==null||r.call(e,u),t.emit("onChange",u),t.emit("update:modelValue",u)},onHtmlChanged:u=>{var r;(r=e.onHtmlChanged)==null||r.call(e,u),t.emit("onHtmlChanged",u)},onGetCatalog:u=>{var r;(r=e.onGetCatalog)==null||r.call(e,u),t.emit("onGetCatalog",u)},mdHeadingId:e.mdHeadingId,noMermaid:n,sanitize:e.sanitize,noKatex:l,formatCopiedText:e.formatCopiedText,noHighlight:o,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var u;(u=e.onRemount)==null||u.call(e),t.emit("onRemount")}},null)])}});Kt.install=e=>(e.component(Kt.name,Kt),e);const Cr=()=>m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-github-icon"},[m("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null),m("path",{d:"M9 18c-4.51 2-5-2-7-2"},null)]),Tr={bold:Di,underline:Ni,italic:Pi,"strike-through":Bi,title:ji,sub:Vi,sup:zi,quote:Wi,"unordered-list":Ui,"ordered-list":Gi,task:qi,"code-row":Xi,code:Nn,link:Ki,image:Yi,table:Zi,revoke:Qi,next:Ji,save:ea,prettier:Nn,minimize:ta,maximize:la,"fullscreen-exit":na,fullscreen:oa,"preview-only":ia,preview:aa,"preview-html":ra,catalog:sa,github:Cr,mermaid:ca,formula:ua,close:da,delete:fa,upload:ha},$r=K({name:`${c}-icon-set`,props:{name:{type:String,default:""}},setup(e){return()=>To(Tr[e.name],{class:`${c}-icon`})}}),j=K({name:`${c}-icon`,props:{name:{type:String,default:""}},setup(e){const t=R("customIcon");return()=>{const l=t.value[e.name];return typeof l=="object"?typeof l.component=="object"?To(l.component,l.props):m("span",{innerHTML:l.component},null):m($r,{name:e.name},null)}}}),Sr={title:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String,default:void 0},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},ht=K({name:"MdModal",props:Sr,emits:["onClose"],setup(e,t){const l=R("theme"),n=R("rootRef"),o=V(e.visible),i=V([`${c}-modal`]),a=V(),u=V(),r=V(),f=nt();let h=()=>{};const s=be({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),g=ce(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});D(()=>e.isFullscreen,T=>{T?h():Pe(()=>{h=qn(u.value,(w,k)=>{s.initPos.left=w+"px",s.initPos.top=k+"px"})})}),D(()=>e.visible,T=>{T?(s.maskStyle.zIndex=oe.editorConfig.zIndex+Kn(),s.modalStyle.zIndex=oe.editorConfig.zIndex+Kn(),i.value.push("zoom-in"),o.value=T,Pe(()=>{const w=a.value.offsetWidth/2,k=a.value.offsetHeight/2,p=document.documentElement.clientWidth/2,b=document.documentElement.clientHeight/2;s.initPos.left=p-w+"px",s.initPos.top=b-k+"px",e.isFullscreen||(h=qn(u.value,($,y)=>{s.initPos.left=$+"px",s.initPos.top=y+"px"}))}),setTimeout(()=>{i.value=i.value.filter(w=>w!=="zoom-in")},140)):(i.value.push("zoom-out"),h(),setTimeout(()=>{i.value=i.value.filter(w=>w!=="zoom-out"),o.value=T},130))});const v=ce(()=>({display:o.value?"block":"none"})),C=ce(()=>typeof e.style=="string"?[e.style,v.value].join("; "):e.style instanceof Object?{...v.value,...e.style}:v.value);return Z(()=>{var T;const w=(T=n.value)==null?void 0:T.getRootNode();r.value=w instanceof Document?document.body:w}),()=>{const T=ye({ctx:t}),w=ye({props:e,ctx:t},"title");return r.value?m(mi,{to:r.value},{default:()=>[m("div",{ref:f,class:`${c}-modal-container`,"data-theme":l.value},[m("div",{class:e.class,style:C.value},[e.showMask&&m("div",{class:`${c}-modal-mask`,style:s.maskStyle,onClick:()=>{var k;(k=e.onClose)==null||k.call(e),t.emit("onClose")}},null),m("div",{class:i.value,style:{...s.modalStyle,...s.initPos,...g.value},ref:a},[m("div",{class:`${c}-modal-header`,ref:u},[w||""]),m("div",{class:`${c}-modal-body`},[T]),m("div",{class:`${c}-modal-func`},[e.showAdjust&&m("div",{class:`${c}-modal-adjust`,onClick:k=>{k.stopPropagation(),e.isFullscreen?s.initPos=s.historyPos:(s.historyPos=s.initPos,s.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[m(j,{name:e.isFullscreen?"minimize":"maximize"},null)]),m("div",{class:`${c}-modal-close`,onClick:k=>{var p;k.stopPropagation(),(p=e.onClose)==null||p.call(e),t.emit("onClose")}},[m(j,{name:"close"},null)])])])])])]}):""}}});ht.install=e=>(e.component(ht.name,ht),e);const xr=`.${c}-preview > [data-line]`,ut=(e,t)=>+getComputedStyle(e).getPropertyValue(t).replace("px",""),_r=(e,t)=>{const l=ko(()=>{e.removeEventListener("scroll",n),e.addEventListener("scroll",n),t.removeEventListener("scroll",n),t.addEventListener("scroll",n)},50),n=o=>{const i=e.clientHeight,a=t.clientHeight,u=e.scrollHeight,r=t.scrollHeight,f=(u-i)/(r-a);o.target===e?(t.removeEventListener("scroll",n),t.scrollTo({top:e.scrollTop/f}),l()):(e.removeEventListener("scroll",n),e.scrollTo({top:t.scrollTop*f}),l())};return[()=>{l().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",n),t.removeEventListener("scroll",n)}]},Er=(e,t,l)=>{const{view:n}=l,o=Co(),i=k=>n.lineBlockAt(n.state.doc.line(k+1).from).top,a=k=>n.lineBlockAt(n.state.doc.line(k+1).from).bottom;let u=[],r=[],f=[];const h=()=>{u=[],r=Array.from(t.querySelectorAll(xr)),f=r.map(y=>Number(y.dataset.line));const k=[...f],{lines:p}=n.state.doc;let b=k.shift()||0,$=k.shift()||p;for(let y=0;y<p;y++)y===$&&(b=y,$=k.shift()||p),u.push({start:b,end:$-1})},s=(k,p)=>{let b=1;for(let $=r.length-1;$-1>=0;$--){const y=r[$],_=r[$-1];if(y.offsetTop+y.offsetHeight>p&&_.offsetTop<p){b=Number(_.dataset.line);break}}for(let $=u.length-1;$>=0;$--){const y=a(u[$].end),_=i(u[$].start);if(y>k&&_<=k){b=b<u[$].start?b:u[$].start;break}}return b};let g=0,v=0;const C=()=>{var k,p,b;if(v!==0)return!1;g++;const{scrollDOM:$,contentHeight:y}=n;let _=ut(t,"padding-top");const H=n.lineBlockAtHeight($.scrollTop),{number:L}=n.state.doc.lineAt(H.from),A=u[L-1];if(!A)return!1;let F=1;const B=t.querySelector(`[data-line="${A.start}"]`)||((k=t.firstElementChild)==null?void 0:k.firstElementChild),M=t.querySelector(`[data-line="${A.end+1}"]`)||((p=t.lastElementChild)==null?void 0:p.lastElementChild),z=$.scrollHeight-$.clientHeight,le=t.scrollHeight-t.clientHeight;let J=i(A.start),ue=a(A.end),de=B.offsetTop,te=M.offsetTop-de;J===0&&(de=0,B===M?(_=0,ue=y-$.offsetHeight,te=le):te=M.offsetTop),F=($.scrollTop-J)/(ue-J);const ae=M==((b=t.lastElementChild)==null?void 0:b.lastElementChild)?M.offsetTop+M.clientHeight:M.offsetTop;if(ue>=z||ae>le){const we=s(z,le);J=i(we),F=($.scrollTop-J)/(z-J);const ge=t.querySelector(`[data-line="${we}"]`);J>0&&ge&&(de=ge.offsetTop),te=le-de+ut(t,"padding-top")}const xe=de-_+te*F;o(t,xe,()=>{g--})},T=()=>{var k,p,b,$,y,_;if(g!==0)return;v++;const{scrollDOM:H}=n,L=t.scrollTop,A=t.scrollHeight,F=H.scrollHeight-H.clientHeight,B=t.scrollHeight-t.clientHeight;let M=(k=t.firstElementChild)==null?void 0:k.firstElementChild,z=(p=t.firstElementChild)==null?void 0:p.lastElementChild;if(f.length>0){let ge=Math.ceil(f[f.length-1]*(L/A)),ee=f.findLastIndex(fe=>fe<=ge);ee=ee===-1?0:ee,ge=f[ee];for(let fe=ee;fe>=0&&fe<f.length;)if(r[fe].offsetTop>L){if(fe-1>=0){fe--;continue}ge=-1,ee=fe;break}else{if(fe+1<f.length&&r[fe+1].offsetTop<L){fe++;continue}ge=f[fe],ee=fe;break}switch(ee){case-1:{M=(b=t.firstElementChild)==null?void 0:b.firstElementChild,z=r[ee];break}case f.length-1:{M=r[ee],z=($=t.firstElementChild)==null?void 0:$.lastElementChild;break}default:M=r[ee],z=r[ee+1===r.length?ee:ee+1]}}let le=M===((y=t.firstElementChild)==null?void 0:y.firstElementChild)?0:M.offsetTop-ut(M,"margin-top"),J=z.offsetTop,ue=0;const{start:de,end:te}=u[Number(M.dataset.line||0)];let ae=i(de);const xe=i(te+1===n.state.doc.lines?te:te+1);let we=0;if(xe>F||z.offsetTop+z.offsetHeight>B){const ge=s(F,B),ee=t.querySelector(`[data-line="${ge}"]`);le=ee?ee.offsetTop-ut(ee,"margin-top"):le,ae=i(ge),ue=(L-le)/(B-le),we=F-ae}else M===((_=t.firstElementChild)==null?void 0:_.firstElementChild)?(M===z&&(J=z.offsetTop+z.offsetHeight+ +getComputedStyle(z).marginBottom.replace("px","")),we=xe,ue=Math.max(L/J,0)):(ue=Math.max((L-le)/(J-le),0),we=xe-ae);o(e,ae+we*ue,()=>{v--})},w=k=>{var p;const{scrollDOM:b,contentHeight:$}=n,y=b.clientHeight;if($<=y||t.firstElementChild.clientHeight<=t.clientHeight||n.state.doc.lines<=((p=u[u.length-1])==null?void 0:p.end))return!1;k.target===e?C():T()};return[()=>{h(),e.addEventListener("scroll",w),t.addEventListener("scroll",w),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",w),t.removeEventListener("scroll",w)}]},Ar={tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onActive:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},Wo=K({props:Ar,setup(e){const t=R("scrollElementRef"),l=R("roorNodeRef"),n=V();return D(()=>e.tocItem.active,o=>{o&&e.onActive(e.tocItem,n.value)}),Z(()=>{e.tocItem.active&&e.onActive(e.tocItem,n.value)}),()=>{const{tocItem:o,mdHeadingId:i,onClick:a,scrollElementOffsetTop:u}=e;return m("div",{ref:n,class:[`${c}-catalog-link`,o.active&&`${c}-catalog-active`],onClick:r=>{if(r.stopPropagation(),a(r,o),r.defaultPrevented)return;const f=i(o.text,o.level,o.index),h=l.value.getElementById(f),s=t.value;if(h&&s){let g=h.offsetParent,v=h.offsetTop;if(s.contains(g))for(;g&&s!=g;)v+=g==null?void 0:g.offsetTop,g=g==null?void 0:g.offsetParent;const C=h.previousElementSibling;let T=0;C||(T=ut(h,"margin-top")),s==null||s.scrollTo({top:v-u-T,behavior:"smooth"})}}},[m("span",{title:o.text},[o.text]),o.children&&o.children.length>0&&m("div",{class:`${c}-catalog-wrapper`},[o.children.map(r=>m(Wo,{mdHeadingId:i,key:`${o.text}-link-${r.level}-${r.text}`,tocItem:r,onActive:e.onActive,onClick:a,scrollElementOffsetTop:u},null))])])}}}),Lr={editorId:{type:String,default:void 0},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object],default:void 0},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function,default:void 0},onActive:{type:Function,default:void 0},isScrollElementInShadow:{type:Boolean,default:!1},syncWith:{type:String,default:"preview"},catalogMaxDepth:{type:Number,default:void 0}},xt=K({name:"MdCatalog",props:Lr,emits:["onClick","onActive"],setup(e,t){const l=e.editorId,n=`#${l}-preview-wrapper`,o=be({list:[],show:!1,scrollElement:e.scrollElement||n}),i=nt(),a=V(),u=V(),r=V(),f=V(),h=nt(),s=V({});Se("scrollElementRef",u),Se("roorNodeRef",f);const g=ce(()=>{const b=[];return o.list.forEach(($,y)=>{if(e.catalogMaxDepth&&$.level>e.catalogMaxDepth)return;const{text:_,level:H,line:L}=$,A={level:H,text:_,line:L,index:y+1,active:i.value===$};if(b.length===0)b.push(A);else{let F=b[b.length-1];if(A.level>F.level)for(let B=F.level+1;B<=6;B++){const{children:M}=F;if(!M){F.children=[A];break}if(F=M[M.length-1],A.level<=F.level){M.push(A);break}}else b.push(A)}}),b}),v=()=>{var b;if(o.scrollElement instanceof HTMLElement)return o.scrollElement;let $=document;return(o.scrollElement===n||e.isScrollElementInShadow)&&($=(b=a.value)==null?void 0:b.getRootNode()),$.querySelector(o.scrollElement)},C=b=>{if(b.length===0)return i.value=void 0,o.list=[],!1;const{activeHead:$}=b.reduce((y,_,H)=>{var L;let A=0;if(e.syncWith==="preview"){const F=(L=f.value)==null?void 0:L.getElementById(e.mdHeadingId(_.text,_.level,H+1));F instanceof HTMLElement&&(A=La(F,u.value))}else{const F=h.value;if(F){const B=F.lineBlockAt(F.state.doc.line(_.line+1).from).top,M=F.scrollDOM.scrollTop;A=B-M}}return A<e.offsetTop&&A>y.minTop?{activeHead:_,minTop:A}:y},{activeHead:b[0],minTop:Number.MIN_SAFE_INTEGER});i.value=$,o.list=b},T=(b,$)=>{var y;s.value.top=$.offsetTop+ut($,"padding-top")+"px",(y=e.onActive)==null||y.call(e,b,$),t.emit("onActive",b,$)},w=()=>{C(o.list)},k=b=>{var $,y,_;if(($=r.value)==null||$.removeEventListener("scroll",w),e.syncWith==="editor")r.value=(y=h.value)==null?void 0:y.scrollDOM;else{const H=v();u.value=H,r.value=H===document.documentElement?document:H}C(b),(_=r.value)==null||_.addEventListener("scroll",w)},p=b=>{h.value=b};return D([()=>e.syncWith,h,()=>e.catalogMaxDepth],()=>{k(o.list)}),Z(()=>{f.value=a.value.getRootNode(),x.on(l,{name:St,callback:k}),x.on(l,{name:Jt,callback:p}),x.emit(l,Io),x.emit(l,Ho)}),ot(()=>{var b;x.remove(l,St,k),x.remove(l,Jt,p),(b=r.value)==null||b.removeEventListener("scroll",w)}),()=>m("div",{class:[`${c}-catalog`,e.theme==="dark"&&`${c}-catalog-dark`,e.class||""],ref:a},[g.value.length>0&&m(Ht,null,[m("div",{class:`${c}-catalog-indicator`,style:s.value},null),m("div",{class:`${c}-catalog-container`},[g.value.map(b=>m(Wo,{mdHeadingId:e.mdHeadingId,tocItem:b,key:`link-${b.level}-${b.text}`,onActive:T,onClick:($,y)=>{var _;(_=e.onClick)==null||_.call(e,$,y),t.emit("onClick",$,y)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])])])}});xt.install=e=>(e.component(xt.name,xt),e);const Ir={title:{type:String,default:""},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},Yt=K({name:"NormalToolbar",props:Ir,emits:["onClick"],setup(e,t){return()=>{const l=ye({props:e,ctx:t},"trigger"),n=ye({props:e,ctx:t});return m("div",{class:[`${c}-toolbar-item`,e.disabled&&`${c}-disabled`],title:e.title,onClick:o=>{var i;e.disabled||((i=e.onClick)==null||i.call(e,o),t.emit("onClick",o))}},[n||l])}}});Yt.install=e=>(e.component(Yt.name,Yt),e);function Fr(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!gi(e)}const Rr={title:{type:String,default:""},modalTitle:{type:[String,Object],default:""},visible:{type:Boolean,default:void 0},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:void 0},class:{type:String,default:void 0},style:{type:[Object,String],default:void 0},showMask:{type:Boolean,default:!0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},Zt=K({name:"ModalToolbar",props:Rr,emits:["onClick","onClose","onAdjust"],setup(e,t){return()=>{const l=ye({props:e,ctx:t},"trigger"),n=ye({props:e,ctx:t},"modalTitle"),o=ye({props:e,ctx:t});return m(Ht,null,[m("div",{class:[`${c}-toolbar-item`,e.disabled&&`${c}-disabled`],title:e.title,onClick:()=>{var i;e.disabled||((i=e.onClick)==null||i.call(e),t.emit("onClick"))}},[l]),m(ht,{style:e.style,class:e.class,width:e.width,height:e.height,title:n,visible:e.visible,showMask:e.showMask,onClose:()=>{var i;(i=e.onClose)==null||i.call(e),t.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:i=>{var a;(a=e.onAdjust)==null||a.call(e,i),t.emit("onAdjust",i)}},Fr(o)?o:{default:()=>[o]})])}}});Zt.install=e=>(e.component(Zt.name,Zt),e);var Hr=Object.defineProperty,Mr=(e,t,l)=>t in e?Hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Ue=(e,t,l)=>Mr(e,typeof t!="symbol"?t+"":t,l);const Or=K({name:`${c}-divider`,setup(){return()=>m("div",{class:`${c}-divider`},null)}}),Dr={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean},catalogVisible:{type:Boolean},codeTheme:{type:String},insertLinkDirect:{type:Boolean}},Nr=e=>{const t=R("editorId"),{editorExtensions:l,editorExtensionsAttrs:n}=oe;let o=l.screenfull.instance;const i=V(!1),a=f=>{if(!o){x.emit(t,Qe,{name:"fullscreen",message:"fullscreen is undefined"});return}o.isEnabled?(i.value=!0,(f===void 0?!o.isFullscreen:f)?o.request():o.exit()):console.error("browser does not support screenfull!")},u=()=>{o&&o.isEnabled&&o.on("change",()=>{(i.value||e.setting.fullscreen)&&(i.value=!1,e.updateSetting("fullscreen"))})},r=()=>{o=window.screenfull,u()};return Z(()=>{var f;u(),o||Ee("script",{...(f=n.screenfull)==null?void 0:f.js,src:l.screenfull.js,id:Ae.screenfull,onload:r},"screenfull")}),Z(()=>{x.on(t,{name:Eo,callback:a})}),{fullscreenHandler:a}},Pr={tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},Br=K({name:"TableShape",props:Pr,setup(e){const t=be({x:-1,y:-1}),l=ce(()=>JSON.stringify(e.tableShape)),n=()=>{const i=[...JSON.parse(l.value)];return(!i[2]||i[2]<i[0])&&(i[2]=i[0]),(!i[3]||i[3]<i[3])&&(i[3]=i[1]),i},o=V(n());return D([l],()=>{o.value=n()}),()=>m("div",{class:`${c}-table-shape`,onMouseleave:()=>{o.value=n(),t.x=-1,t.y=-1}},[new Array(o.value[1]).fill("").map((i,a)=>m("div",{class:`${c}-table-shape-row`,key:`table-shape-row-${a}`},[new Array(o.value[0]).fill("").map((u,r)=>m("div",{class:`${c}-table-shape-col`,key:`table-shape-col-${r}`,onMouseenter:()=>{t.x=a,t.y=r,r+1===o.value[0]&&r+1<o.value[2]?o.value[0]++:r+2<o.value[0]&&o.value[0]>e.tableShape[0]&&o.value[0]--,a+1===o.value[1]&&a+1<o.value[3]?o.value[1]++:a+2<o.value[1]&&o.value[1]>e.tableShape[1]&&o.value[1]--},onClick:()=>{e.onSelected(t)}},[m("div",{class:[`${c}-table-shape-col-default`,a<=t.x&&r<=t.y&&`${c}-table-shape-col-include`]},null)]))]))])}}),jr={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Vr=K({name:`${c}-modal-link`,props:jr,setup(e){const t=R("usedLanguageText"),l=R("editorId"),n=ce(()=>{var i,a;switch(e.type){case"link":return(i=t.value.linkModalTips)==null?void 0:i.linkTitle;case"image":return(a=t.value.linkModalTips)==null?void 0:a.imageTitle;default:return""}}),o=be({desc:"",url:""});return D(()=>e.visible,i=>{i||setTimeout(()=>{o.desc="",o.url=""},200)}),()=>m(ht,{title:n.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var i,a,u,r,f;return[m("div",{class:`${c}-form-item`},[m("label",{class:`${c}-label`,for:`link-desc-${l}`},[(i=t.value.linkModalTips)==null?void 0:i.descLabel]),m("input",{placeholder:(a=t.value.linkModalTips)==null?void 0:a.descLabelPlaceHolder,class:`${c}-input`,id:`link-desc-${l}`,type:"text",value:o.desc,onChange:h=>{o.desc=h.target.value},autocomplete:"off"},null)]),m("div",{class:`${c}-form-item`},[m("label",{class:`${c}-label`,for:`link-url-${l}`},[(u=t.value.linkModalTips)==null?void 0:u.urlLabel]),m("input",{placeholder:(r=t.value.linkModalTips)==null?void 0:r.urlLabelPlaceHolder,class:`${c}-input`,id:`link-url-${l}`,type:"text",value:o.url,onChange:h=>{o.url=h.target.value},autocomplete:"off"},null)]),m("div",{class:`${c}-form-item`},[m("button",{class:[`${c}-btn`,`${c}-btn-row`],type:"button",onClick:()=>{e.onOk(o),o.desc="",o.url=""}},[(f=t.value.linkModalTips)==null?void 0:f.buttonOK])])]}})}}),zr={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Wr=K({name:`${c}-modal-clip`,props:zr,setup(e){const t=R("usedLanguageText"),l=R("editorId"),n=R("rootRef");let o=oe.editorExtensions.cropper.instance;const i=V(),a=V(),u=V(),r=be({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let f=null;D(()=>e.visible,()=>{e.visible&&!r.cropperInited&&(o=o||window.Cropper,i.value.onchange=()=>{if(!o){x.emit(l,Qe,{name:"Cropper",message:"Cropper is undefined"});return}const s=i.value.files||[];if(r.imgSelected=!0,(s==null?void 0:s.length)>0){const g=new FileReader;g.onload=v=>{r.imgSrc=v.target.result},g.readAsDataURL(s[0])}})}),D(()=>[r.imgSelected],()=>{u.value.style=""}),D([Ne(()=>r.isFullscreen),Ne(()=>r.imgSrc)],()=>{r.imgSrc&&Pe(()=>{f==null||f.destroy(),u.value.style="",a.value&&(f=new o(a.value,{viewMode:2,preview:n.value.getRootNode().querySelector(`.${c}-clip-preview-target`)}))})});const h=()=>{f.clear(),f.destroy(),f=null,i.value.value="",r.imgSelected=!1};return()=>{var s;return m(ht,{class:`${c}-modal-clip`,title:(s=t.value.clipModalTips)==null?void 0:s.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:r.isFullscreen,onAdjust:g=>{r.isFullscreen=g},width:"668px",height:"421px"},{default:()=>{var g,v,C;return[m("div",{class:`${c}-form-item ${c}-clip`},[m("div",{class:`${c}-clip-main`},[r.imgSelected?m("div",{class:`${c}-clip-cropper`},[m("img",{src:r.imgSrc,ref:a,style:{display:"none"},alt:""},null),m("div",{class:`${c}-clip-delete`,onClick:h},[m(j,{name:"delete"},null)])]):m("div",{class:`${c}-clip-upload`,onClick:()=>{i.value.click()},role:"button",tabindex:"0","aria-label":(g=t.value.imgTitleItem)==null?void 0:g.upload},[m(j,{name:"upload"},null)])]),m("div",{class:`${c}-clip-preview`},[m("div",{class:`${c}-clip-preview-target`,ref:u},null)])]),m("div",{class:`${c}-form-item`},[m("button",{class:`${c}-btn`,type:"button",onClick:()=>{if(f){const T=f.getCroppedCanvas();x.emit(l,il,[Ea(T.toDataURL("image/png"))],e.onOk),h()}}},[((v=t.value.clipModalTips)==null?void 0:v.buttonUpload)||((C=t.value.linkModalTips)==null?void 0:C.buttonOK)])]),m("input",{ref:i,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]}})}}}),Ur={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Gr=K({name:`${c}-modals`,props:Ur,setup(e){return()=>m(Ht,null,[m(Vr,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),m(Wr,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}}),qr=K({name:"MDEditorToolbar",props:Dr,setup(e){const t=R("editorId"),l=R("usedLanguageText"),n=R("theme"),o=R("previewTheme"),i=R("language"),a=R("disabled"),{fullscreenHandler:u}=Nr(e),r=`${t}-toolbar-wrapper`,f=V(),h=be({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),s=(p,b)=>{if(a!=null&&a.value)return!1;x.emit(t,W,p,b)},g=be({type:"link",linkVisible:!1,clipVisible:!1}),v=V();Z(()=>{x.on(t,{name:bl,callback(p){g.type=p,g.linkVisible=!0}})});const C=ce(()=>{const p=e.toolbars.filter(_=>!e.toolbarsExclude.includes(_)),b=p.indexOf("="),$=b===-1?p:p.slice(0,b+1),y=b===-1?[]:p.slice(b,Number.MAX_SAFE_INTEGER);return[$,y]}),T=V(),w=()=>{x.emit(t,il,Array.from(T.value.files||[])),T.value.value=""};Z(()=>{T.value.addEventListener("change",w)});const k=p=>{var b,$,y,_,H,L,A,F,B,M,z,le,J,ue,de,te,ae,xe,we,ge,ee,fe,rl,Fl,Rl,Hl,Ml,Ol,Dl,Nl,Pl,Bl,jl,Vl,zl,Wl,Ul,Gl,ql,Xl,Kl,Yl,Zl,Ql,Jl,en,tn,ln,nn,on,an,rn,sn,cn,un,dn,fn,hn,mn,gn,vn,pn,bn,yn,wn,kn,Cn,Tn,$n,Sn,xn,_n,En,An,Ln,In,Fn,Rn,Hn,Mn,On;if(xo.includes(p))switch(p){case"-":return m(Or,null,null);case"bold":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(b=l.value.toolbarTips)==null?void 0:b.bold,onClick:()=>{s("bold")}},[m(j,{name:"bold"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[($=l.value.toolbarTips)==null?void 0:$.bold])]);case"underline":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(y=l.value.toolbarTips)==null?void 0:y.underline,onClick:()=>{s("underline")}},[m(j,{name:"underline"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(_=l.value.toolbarTips)==null?void 0:_.underline])]);case"italic":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(H=l.value.toolbarTips)==null?void 0:H.italic,onClick:()=>{s("italic")}},[m(j,{name:"italic"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(L=l.value.toolbarTips)==null?void 0:L.italic])]);case"strikeThrough":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(A=l.value.toolbarTips)==null?void 0:A.strikeThrough,onClick:()=>{s("strikeThrough")}},[m(j,{name:"strike-through"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(F=l.value.toolbarTips)==null?void 0:F.strikeThrough])]);case"title":return m(ct,{relative:`#${r}`,visible:h.title,onChange:N=>{h.title=N},disabled:a==null?void 0:a.value,overlay:m("ul",{class:`${c}-menu`,onClick:()=>{h.title=!1},role:"menu"},[m("li",{class:`${c}-menu-item ${c}-menu-item-title`,onClick:()=>{s("h1")},role:"menuitem",tabindex:"0"},[(B=l.value.titleItem)==null?void 0:B.h1]),m("li",{class:`${c}-menu-item ${c}-menu-item-title`,onClick:()=>{s("h2")},role:"menuitem",tabindex:"0"},[(M=l.value.titleItem)==null?void 0:M.h2]),m("li",{class:`${c}-menu-item ${c}-menu-item-title`,onClick:()=>{s("h3")},role:"menuitem",tabindex:"0"},[(z=l.value.titleItem)==null?void 0:z.h3]),m("li",{class:`${c}-menu-item ${c}-menu-item-title`,onClick:()=>{s("h4")},role:"menuitem",tabindex:"0"},[(le=l.value.titleItem)==null?void 0:le.h4]),m("li",{class:`${c}-menu-item ${c}-menu-item-title`,onClick:()=>{s("h5")},role:"menuitem",tabindex:"0"},[(J=l.value.titleItem)==null?void 0:J.h5]),m("li",{class:`${c}-menu-item ${c}-menu-item-title`,onClick:()=>{s("h6")},role:"menuitem",tabindex:"0"},[(ue=l.value.titleItem)==null?void 0:ue.h6])])},{default:()=>{var N,he;return[m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(N=l.value.toolbarTips)==null?void 0:N.title},[m(j,{name:"title"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(he=l.value.toolbarTips)==null?void 0:he.title])])]}});case"sub":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(de=l.value.toolbarTips)==null?void 0:de.sub,onClick:()=>{s("sub")}},[m(j,{name:"sub"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(te=l.value.toolbarTips)==null?void 0:te.sub])]);case"sup":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(ae=l.value.toolbarTips)==null?void 0:ae.sup,onClick:()=>{s("sup")}},[m(j,{name:"sup"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(xe=l.value.toolbarTips)==null?void 0:xe.sup])]);case"quote":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(we=l.value.toolbarTips)==null?void 0:we.quote,onClick:()=>{s("quote")}},[m(j,{name:"quote"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(ge=l.value.toolbarTips)==null?void 0:ge.quote])]);case"unorderedList":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(ee=l.value.toolbarTips)==null?void 0:ee.unorderedList,onClick:()=>{s("unorderedList")}},[m(j,{name:"unordered-list"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(fe=l.value.toolbarTips)==null?void 0:fe.unorderedList])]);case"orderedList":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(rl=l.value.toolbarTips)==null?void 0:rl.orderedList,onClick:()=>{s("orderedList")}},[m(j,{name:"ordered-list"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(Fl=l.value.toolbarTips)==null?void 0:Fl.orderedList])]);case"task":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(Rl=l.value.toolbarTips)==null?void 0:Rl.task,onClick:()=>{s("task")}},[m(j,{name:"task"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(Hl=l.value.toolbarTips)==null?void 0:Hl.task])]);case"codeRow":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(Ml=l.value.toolbarTips)==null?void 0:Ml.codeRow,onClick:()=>{s("codeRow")}},[m(j,{name:"code-row"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(Ol=l.value.toolbarTips)==null?void 0:Ol.codeRow])]);case"code":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(Dl=l.value.toolbarTips)==null?void 0:Dl.code,onClick:()=>{s("code")}},[m(j,{name:"code"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(Nl=l.value.toolbarTips)==null?void 0:Nl.code])]);case"link":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(Pl=l.value.toolbarTips)==null?void 0:Pl.link,onClick:()=>{if(a!=null&&a.value)return!1;e.insertLinkDirect?s("link"):(g.type="link",g.linkVisible=!0)}},[m(j,{name:"link"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(Bl=l.value.toolbarTips)==null?void 0:Bl.link])]);case"image":return e.noUploadImg?m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(jl=l.value.toolbarTips)==null?void 0:jl.image,onClick:()=>{if(a!=null&&a.value)return!1;e.insertLinkDirect?s("image"):(g.type="image",g.linkVisible=!0)}},[m(j,{name:"image"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(Vl=l.value.toolbarTips)==null?void 0:Vl.image])]):m(ct,{relative:`#${r}`,visible:h.image,onChange:N=>{h.image=N},disabled:a==null?void 0:a.value,overlay:m("ul",{class:`${c}-menu`,onClick:()=>{h.image=!1},role:"menu"},[m("li",{class:`${c}-menu-item ${c}-menu-item-image`,onClick:()=>{e.insertLinkDirect?s("image"):(g.type="image",g.linkVisible=!0)},role:"menuitem",tabindex:"0"},[(zl=l.value.imgTitleItem)==null?void 0:zl.link]),m("li",{class:`${c}-menu-item ${c}-menu-item-image`,onClick:()=>{T.value.click()},role:"menuitem",tabindex:"0"},[(Wl=l.value.imgTitleItem)==null?void 0:Wl.upload]),m("li",{class:`${c}-menu-item ${c}-menu-item-image`,onClick:()=>{g.clipVisible=!0},role:"menuitem",tabindex:"0"},[(Ul=l.value.imgTitleItem)==null?void 0:Ul.clip2upload])])},{default:()=>{var N,he;return[m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(N=l.value.toolbarTips)==null?void 0:N.image},[m(j,{name:"image"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(he=l.value.toolbarTips)==null?void 0:he.image])])]}});case"table":return m(ct,{relative:`#${r}`,visible:h.table,onChange:N=>{h.table=N},disabled:a==null?void 0:a.value,key:"bar-table",overlay:m(Br,{tableShape:e.tableShape,onSelected:N=>{s("table",{selectedShape:N})}},null)},{default:()=>{var N,he;return[m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(N=l.value.toolbarTips)==null?void 0:N.table},[m(j,{name:"table"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(he=l.value.toolbarTips)==null?void 0:he.table])])]}});case"revoke":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(Gl=l.value.toolbarTips)==null?void 0:Gl.revoke,onClick:()=>{if(a!=null&&a.value)return!1;x.emit(t,Ao)}},[m(j,{name:"revoke"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(ql=l.value.toolbarTips)==null?void 0:ql.revoke])]);case"next":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(Xl=l.value.toolbarTips)==null?void 0:Xl.next,onClick:()=>{if(a!=null&&a.value)return!1;x.emit(t,Lo)}},[m(j,{name:"next"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(Kl=l.value.toolbarTips)==null?void 0:Kl.next])]);case"save":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(Yl=l.value.toolbarTips)==null?void 0:Yl.save,onClick:()=>{if(a!=null&&a.value)return!1;x.emit(t,ol)}},[m(j,{name:"save"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(Zl=l.value.toolbarTips)==null?void 0:Zl.save])]);case"prettier":return e.noPrettier?"":m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(Ql=l.value.toolbarTips)==null?void 0:Ql.prettier,onClick:()=>{s("prettier")}},[m(j,{name:"prettier"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(Jl=l.value.toolbarTips)==null?void 0:Jl.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&m("div",{class:[`${c}-toolbar-item`,e.setting.pageFullscreen&&`${c}-toolbar-active`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(en=l.value.toolbarTips)==null?void 0:en.pageFullscreen,onClick:()=>{if(a!=null&&a.value)return!1;e.updateSetting("pageFullscreen")}},[m(j,{name:e.setting.pageFullscreen?"minimize":"maximize"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(tn=l.value.toolbarTips)==null?void 0:tn.pageFullscreen])]);case"fullscreen":return m("div",{class:[`${c}-toolbar-item`,e.setting.fullscreen&&`${c}-toolbar-active`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(ln=l.value.toolbarTips)==null?void 0:ln.fullscreen,onClick:()=>{if(a!=null&&a.value)return!1;u()}},[m(j,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(nn=l.value.toolbarTips)==null?void 0:nn.fullscreen])]);case"preview":return m("div",{class:[`${c}-toolbar-item`,e.setting.preview&&`${c}-toolbar-active`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(on=l.value.toolbarTips)==null?void 0:on.preview,onClick:()=>{if(a!=null&&a.value)return!1;e.updateSetting("preview")}},[m(j,{name:"preview"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(an=l.value.toolbarTips)==null?void 0:an.preview])]);case"previewOnly":return m("div",{class:[`${c}-toolbar-item`,e.setting.previewOnly&&`${c}-toolbar-active`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(rn=l.value.toolbarTips)==null?void 0:rn.previewOnly,onClick:()=>{if(a!=null&&a.value)return!1;e.updateSetting("previewOnly")}},[m(j,{name:"preview-only"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(sn=l.value.toolbarTips)==null?void 0:sn.previewOnly])]);case"htmlPreview":return m("div",{class:[`${c}-toolbar-item`,e.setting.htmlPreview&&`${c}-toolbar-active`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(cn=l.value.toolbarTips)==null?void 0:cn.htmlPreview,onClick:()=>{if(a!=null&&a.value)return!1;e.updateSetting("htmlPreview")}},[m(j,{name:"preview-html"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(un=l.value.toolbarTips)==null?void 0:un.htmlPreview])]);case"catalog":return m("div",{class:[`${c}-toolbar-item`,e.catalogVisible&&`${c}-toolbar-active`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(dn=l.value.toolbarTips)==null?void 0:dn.catalog,onClick:()=>{if(a!=null&&a.value)return!1;x.emit(t,xl)},key:"bar-catalog"},[m(j,{name:"catalog"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(fn=l.value.toolbarTips)==null?void 0:fn.catalog])]);case"github":return m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(hn=l.value.toolbarTips)==null?void 0:hn.github,onClick:()=>{if(a!=null&&a.value)return!1;di("https://github.com/imzbf/md-editor-v3")}},[m(j,{name:"github"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(mn=l.value.toolbarTips)==null?void 0:mn.github])]);case"mermaid":return m(ct,{relative:`#${r}`,visible:h.mermaid,onChange:N=>{h.mermaid=N},disabled:a==null?void 0:a.value,overlay:m("ul",{class:`${c}-menu`,onClick:()=>{h.mermaid=!1},role:"menu"},[m("li",{class:`${c}-menu-item ${c}-menu-item-mermaid`,onClick:()=>{s("flow")},role:"menuitem",tabindex:"0"},[(gn=l.value.mermaid)==null?void 0:gn.flow]),m("li",{class:`${c}-menu-item ${c}-menu-item-mermaid`,onClick:()=>{s("sequence")},role:"menuitem",tabindex:"0"},[(vn=l.value.mermaid)==null?void 0:vn.sequence]),m("li",{class:`${c}-menu-item ${c}-menu-item-mermaid`,onClick:()=>{s("gantt")},role:"menuitem",tabindex:"0"},[(pn=l.value.mermaid)==null?void 0:pn.gantt]),m("li",{class:`${c}-menu-item ${c}-menu-item-mermaid`,onClick:()=>{s("class")},role:"menuitem",tabindex:"0"},[(bn=l.value.mermaid)==null?void 0:bn.class]),m("li",{class:`${c}-menu-item ${c}-menu-item-mermaid`,onClick:()=>{s("state")},role:"menuitem",tabindex:"0"},[(yn=l.value.mermaid)==null?void 0:yn.state]),m("li",{class:`${c}-menu-item ${c}-menu-item-mermaid`,onClick:()=>{s("pie")},role:"menuitem",tabindex:"0"},[(wn=l.value.mermaid)==null?void 0:wn.pie]),m("li",{class:`${c}-menu-item ${c}-menu-item-mermaid`,onClick:()=>{s("relationship")},role:"menuitem",tabindex:"0"},[(kn=l.value.mermaid)==null?void 0:kn.relationship]),m("li",{class:`${c}-menu-item ${c}-menu-item-mermaid`,onClick:()=>{s("journey")},role:"menuitem",tabindex:"0"},[(Cn=l.value.mermaid)==null?void 0:Cn.journey])]),key:"bar-mermaid"},{default:()=>{var N,he;return[m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(N=l.value.toolbarTips)==null?void 0:N.mermaid},[m(j,{name:"mermaid"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(he=l.value.toolbarTips)==null?void 0:he.mermaid])])]}});case"katex":return m(ct,{relative:`#${r}`,visible:h.katex,onChange:N=>{h.katex=N},disabled:a==null?void 0:a.value,overlay:m("ul",{class:`${c}-menu`,onClick:()=>{h.katex=!1},role:"menu"},[m("li",{class:`${c}-menu-item ${c}-menu-item-katex`,onClick:()=>{s("katexInline")},role:"menuitem",tabindex:"0"},[(Tn=l.value.katex)==null?void 0:Tn.inline]),m("li",{class:`${c}-menu-item ${c}-menu-item-katex`,onClick:()=>{s("katexBlock")},role:"menuitem",tabindex:"0"},[($n=l.value.katex)==null?void 0:$n.block])]),key:"bar-katex"},{default:()=>{var N,he;return[m("div",{class:[`${c}-toolbar-item`,(a==null?void 0:a.value)&&`${c}-disabled`],title:(N=l.value.toolbarTips)==null?void 0:N.katex},[m(j,{name:"formula"},null),e.showToolbarName&&m("div",{class:`${c}-toolbar-item-name`},[(he=l.value.toolbarTips)==null?void 0:he.katex])])]}})}else if(e.defToolbars instanceof Array){const N=e.defToolbars[p];return N?_t(N,{theme:((Sn=N.props)==null?void 0:Sn.theme)||n.value,previewTheme:((xn=N.props)==null?void 0:xn.theme)||o.value,language:((_n=N.props)==null?void 0:_n.theme)||i.value,codeTheme:((En=N.props)==null?void 0:En.codeTheme)||e.codeTheme,disabled:((An=N.props)==null?void 0:An.disabled)||(a==null?void 0:a.value),showToolbarName:((Ln=N.props)==null?void 0:Ln.showToolbarName)||e.showToolbarName,insert(sl){x.emit(t,W,"universal",{generate:sl})}}):""}else if(e.defToolbars&&e.defToolbars.children instanceof Array){const N=e.defToolbars.children[p];return N?_t(N,{theme:((In=N.props)==null?void 0:In.theme)||n.value,previewTheme:((Fn=N.props)==null?void 0:Fn.theme)||o.value,language:((Rn=N.props)==null?void 0:Rn.theme)||i.value,codeTheme:((Hn=N.props)==null?void 0:Hn.codeTheme)||e.codeTheme,disabled:((Mn=N.props)==null?void 0:Mn.disabled)||(a==null?void 0:a.value),showToolbarName:((On=N.props)==null?void 0:On.showToolbarName)||e.showToolbarName,insert(sl){x.emit(t,W,"universal",{generate:sl})}}):""}else return""};return D(()=>e.toolbars,()=>{Pe(()=>{f.value&&ui(f.value)})},{immediate:!0}),()=>{var p;const b=C.value[0].map(y=>k(y)),$=C.value[1].map(y=>k(y));return m(Ht,null,[e.toolbars.length>0&&m("div",{class:`${c}-toolbar-wrapper`,ref:f,id:r},[m("div",{class:[`${c}-toolbar`,e.showToolbarName&&`${c}-stn`]},[m("div",{class:`${c}-toolbar-left`,ref:v},[b]),m("div",{class:`${c}-toolbar-right`},[$])])]),m("label",{for:`${r}_label`,style:{display:"none"},"aria-label":(p=l.value.imgTitleItem)==null?void 0:p.upload},null),m("input",{id:`${r}_label`,ref:T,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),m(Gr,{linkVisible:g.linkVisible,clipVisible:g.clipVisible,type:g.type,onCancel:()=>{g.linkVisible=!1,g.clipVisible=!1},onOk:y=>{y&&s(g.type,{desc:y.desc,url:y.url,transform:g.type==="image"}),g.linkVisible=!1,g.clipVisible=!1}},null)])}}}),Xr=(e,t,l)=>{const n=R("editorId");let o=()=>{},i=()=>{};const a=()=>{var u;o();const r=(u=l.value)==null?void 0:u.view.contentDOM.getRootNode(),f=r.querySelector(`#${n} .cm-scroller`),h=r.querySelector(`[id="${n}-preview-wrapper"]`),s=r.querySelector(`[id="${n}-html-wrapper"]`);(h||s)&&([i,o]=(h?Er:_r)(f,h||s,l.value),e.scrollAuto&&i())};D([t,Ne(e.setting,"preview"),Ne(e.setting,"htmlPreview"),Ne(e.setting,"fullscreen"),Ne(e.setting,"pageFullscreen")],()=>{Pe(a)}),D(()=>e.scrollAuto,u=>{u?i():o()}),D(()=>e.setting.previewOnly,u=>{u?o():i()}),Z(a)},dl=async(e,t,l)=>{if(/^h[1-6]$/.test(e))return Kr(e,t);if(e==="prettier")return await Yr(t,l);switch(e){case"bold":case"underline":case"italic":case"strikeThrough":case"sub":case"sup":case"codeRow":case"katexInline":case"katexBlock":return Qr(e,t);case"quote":case"orderedList":case"unorderedList":case"task":return es(e,t);case"code":return ts(l,t);case"table":return os(l);case"link":{const{desc:n="",url:o=""}=l,i=`[${n}](${o})`;return{text:i,options:{select:o==="",deviationStart:i.length-o.length-1,deviationEnd:-1}}}case"image":return ns(l);case"flow":case"sequence":case"gantt":case"class":case"state":case"pie":case"relationship":case"journey":return ls(e);case"universal":return is(t.getSelectedText(),l);default:return{text:"",options:{}}}},Kr=(e,t)=>{const l=e.slice(1),n="#".repeat(Number(l)),[o,i,a]=El(t,{wholeLine:!0});return{text:`${n} ${o}`,options:{deviationStart:n.length+1,replaceStart:i,replaceEnd:a}}},Yr=async(e,t)=>{var l,n,o;const i=window.prettier||((l=oe.editorExtensions.prettier)==null?void 0:l.prettierInstance),a=[((n=window.prettierPlugins)==null?void 0:n.markdown)||((o=oe.editorExtensions.prettier)==null?void 0:o.parserMarkdownInstance)];return!i||!a[0]?(x.emit(t.editorId,Qe,{name:"prettier",message:"prettier is undefined"}),{text:e.getValue(),options:{select:!1,replaceAll:!0}}):{text:await i.format(e.getValue(),{parser:"markdown",plugins:a}),options:{select:!1,replaceAll:!0}}},Zr={bold:["**","**",2,-2],underline:["<u>","</u>",3,-4],italic:["*","*",1,-1],strikeThrough:["~~","~~",2,-2],sub:["~","~",1,-1],sup:["^","^",1,-1],codeRow:["`","`",1,-1],katexInline:["$","$",1,-1],katexBlock:[`
$$
`,`
$$
`,4,-4]},Qr=(e,t)=>{const l=t.getSelectedText(),[n,o,i,a]=Zr[e];return{text:`${n}${l}${o}`,options:{deviationStart:i,deviationEnd:a}}},Jr={quote:"> ",unorderedList:"- ",orderedList:1,task:"- [ ] "},es=(e,t)=>{const[l,n,o]=El(t,{wholeLine:!0}),i=l.split(`
`),a=Jr[e],u=e==="orderedList"?i.map((h,s)=>`${a+s}. ${h}`):i.map(h=>`${a}${h}`),r=e==="orderedList"?"1. ":a.toString(),f=i.length===1?r.length:0;return{text:u.join(`
`),options:{deviationStart:f,replaceStart:n,replaceEnd:o}}},ts=(e,t)=>{const[l,n,o]=El(t),i=e.mode||"language",a=`
\`\`\`${i}
${e.text||l||""}
\`\`\`
`;return{text:a,options:{deviationStart:4,deviationEnd:4+i.length-a.length,replaceStart:n,replaceEnd:o}}},ls=e=>({text:`
\`\`\`mermaid
${{flow:`flowchart TD 
  Start --> Stop`,sequence:`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!`,gantt:`gantt
title Gantt Chart
dateFormat  YYYY-MM-DD`,class:`classDiagram
  class Animal`,state:`stateDiagram-v2
  s1 --> s2`,pie:`pie
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`,relationship:`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows`,journey:`journey
  title My Journey`,...oe.editorConfig.mermaidTemplate}[e]}
\`\`\`
`,options:{deviationStart:12,deviationEnd:-5}}),ns=e=>{const{desc:t="",url:l="",urls:n}=e;let o="";const i=l===""&&(!n||n instanceof Array&&n.length===0);return n instanceof Array?o=n.reduce((a,u)=>{const{url:r="",alt:f="",title:h=""}=typeof u=="object"?u:{url:u};return a+`![${f}](${r}${h?" '"+h+"'":""})
`},""):o=`![${t}](${l})
`,{text:o,options:{select:l==="",deviationStart:i?o.length-l.length-2:o.length,deviationEnd:i?-2:0}}},os=e=>{const{selectedShape:t={x:1,y:1}}=e,{x:l,y:n}=t;let o=`
| Column`;for(let i=0;i<=n;i++)o+=" |";o+=`
|`;for(let i=0;i<=n;i++)o+=" - |";for(let i=0;i<=l;i++){o+=`
|`;for(let a=0;a<=n;a++)o+=" |"}return o+=`
`,{text:o,options:{deviationStart:3,deviationEnd:10-o.length}}},is=(e,t)=>{const{generate:l}=t,n=l(e);return{text:n.targetValue,options:{select:n.select??!0,deviationStart:n.deviationStart||0,deviationEnd:n.deviationEnd||0}}},El=(e,t={wholeLine:!1})=>{const l=e.view.state,n=l.selection.main;if(n.empty){const o=l.doc.lineAt(n.from);return[l.doc.lineAt(n.from).text,o.from,o.to]}else if(t.wholeLine){const o=l.doc.lineAt(n.from),i=l.doc.lineAt(n.to);return[l.doc.sliceString(o.from,i.to),o.from,i.to]}return[l.doc.sliceString(n.from,n.to),n.from,n.to]},as="#e5c07b",eo="var(--md-color)",rs="#56b6c2",ss="#ffffff",Tt="var(--md-color)",to="#e5c07b",cs="#e5c07b",us="var(--md-color)",lo="#d19a66",ds="#c678dd",fs="#21252b",hs="#2c313a",no="var(--md-bk-color)",fl="var(--md-bk-color)",ms="#ceedfa33",oo="#528bff",gs=We.theme({"&":{color:Tt,backgroundColor:no},".cm-content":{caretColor:oo},".cm-cursor, .cm-dropCursor":{borderLeftColor:oo},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ms},".cm-panels":{backgroundColor:fs,color:Tt},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:no,color:Tt,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:hs},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:fl},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:fl,borderBottomColor:fl},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Tt}}},{dark:!0}),vs=$o.define([{tag:S.keyword,color:ds},{tag:[S.name,S.deleted,S.character,S.propertyName,S.macroName],color:eo},{tag:[S.function(S.variableName),S.labelName],color:cs},{tag:[S.color,S.constant(S.name),S.standard(S.name)],color:lo},{tag:[S.definition(S.name),S.separator],color:Tt},{tag:[S.typeName,S.className,S.number,S.changed,S.annotation,S.modifier,S.self,S.namespace],color:as},{tag:[S.operator,S.operatorKeyword,S.url,S.escape,S.regexp,S.link,S.special(S.string)],color:rs},{tag:[S.meta,S.comment],color:to},{tag:S.strong,fontWeight:"bold"},{tag:S.emphasis,fontStyle:"italic"},{tag:S.strikethrough,textDecoration:"line-through"},{tag:S.link,color:to,textDecoration:"underline"},{tag:S.heading,fontWeight:"bold",color:eo},{tag:[S.atom,S.bool,S.special(S.variableName)],color:lo},{tag:[S.processingInstruction,S.string,S.inserted],color:us},{tag:S.invalid,color:ss}]),io=[gs,So(vs)],ps="#e5c07b",ao="var(--md-color)",bs="#56b6c2",ys="#fff",$t="#3f4a54",ro="#2d8cf0",ws="#2d8cf0",ks="#3f4a54",so="#d19a66",Cs="#c678dd",Ts="#f6f6f6",$s="#ceedfa33",co="var(--md-bk-color)",hl="var(--md-bk-color)",Ss="#bad5fa",uo="#3f4a54",xs=We.theme({"&":{color:$t,backgroundColor:co},".cm-content":{caretColor:uo},".cm-cursor, .cm-dropCursor":{borderLeftColor:uo},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Ss},".cm-panels":{backgroundColor:Ts,color:$t},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:co,color:$t,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:$s},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:hl},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:hl,borderBottomColor:hl},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:$t}}}),_s=$o.define([{tag:S.keyword,color:Cs},{tag:[S.name,S.deleted,S.character,S.propertyName,S.macroName],color:ao},{tag:[S.function(S.variableName),S.labelName],color:ws},{tag:[S.color,S.constant(S.name),S.standard(S.name)],color:so},{tag:[S.definition(S.name),S.separator],color:$t},{tag:[S.typeName,S.className,S.number,S.changed,S.annotation,S.modifier,S.self,S.namespace],color:ps},{tag:[S.operator,S.operatorKeyword,S.url,S.escape,S.regexp,S.link,S.special(S.string)],color:bs},{tag:[S.meta,S.comment],color:ro},{tag:S.strong,fontWeight:"bold"},{tag:S.emphasis,fontStyle:"italic"},{tag:S.strikethrough,textDecoration:"line-through"},{tag:S.link,color:ro,textDecoration:"underline"},{tag:S.heading,fontWeight:"bold",color:ao},{tag:[S.atom,S.bool,S.special(S.variableName)],color:so},{tag:[S.processingInstruction,S.string,S.inserted],color:ks},{tag:S.invalid,color:ys}]),fo=[xs,So(_s)],Dt=(e,t,l,n,o)=>(i,a,u,r)=>{const f=`${e}${t}${l}${n}`,h=u+a.label.length+(o==="title"?l.length:0);i.dispatch({changes:{from:u,to:r,insert:f},selection:ft.create([ft.range(u+a.label.length+(o==="title"?1:-t.length),h),ft.cursor(h)],1)}),i.focus()},ho=e=>(t,l,n,o)=>{const i=e.slice(o-n);t.dispatch(t.state.replaceSelection(`${i} `))},mo=e=>{const t=l=>{const n=l.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return n===null||n.from==n.to&&l.explicit?null:{from:n.from,options:[...["h2","h3","h4","h5","h6"].map((o,i)=>{const a=new Array(i+2).fill("#").join("");return{label:a,type:"text",apply:ho(a)}}),...["unchecked","checked"].map(o=>{const i=o==="checked"?"- [x]":"- [ ]";return{label:i,type:"text",apply:ho(i)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(o=>({label:`${o[0]}${o[1]}`,type:"text",apply:Dt(o[0],o[1],"",o[0]==="`"?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:Dt("$","","","$","type")},{label:"$$",type:"text",apply:Dt("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(o=>({label:`!!! ${o}`,type:"text",apply:Dt("!!!",` ${o}`," Title",`

!!!`,"title")}))]}};return Ci({override:e?[t,...e]:[t]})},rt=e=>{const t=new st;return n=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(n)}):e.dispatch({effects:Ai.appendConfig.of(t.of(n))}),!0)};class Es{constructor(t){Ue(this,"view"),Ue(this,"maxLength",Number.MAX_SAFE_INTEGER),Ue(this,"toggleTabSize"),Ue(this,"togglePlaceholder"),Ue(this,"setExtensions"),Ue(this,"toggleDisabled"),Ue(this,"toggleReadOnly"),Ue(this,"toggleMaxlength"),this.view=t,this.toggleTabSize=rt(this.view),this.togglePlaceholder=rt(this.view),this.setExtensions=rt(this.view),this.toggleDisabled=rt(this.view),this.toggleReadOnly=rt(this.view),this.toggleMaxlength=rt(this.view)}getValue(){return this.view.state.doc.toString()}setValue(t,l=0,n=this.view.state.doc.length){this.view.dispatch({changes:{from:l,to:n,insert:t}})}getSelectedText(){const{from:t,to:l}=this.view.state.selection.main;return this.view.state.sliceDoc(t,l)}replaceSelectedText(t,l,n){const o={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1,replaceStart:-1,replaceEnd:-1,...l};try{if(o.replaceAll){if(this.setValue(t),t.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+t.length>this.maxLength)throw new Error("The input text is too long");const{from:i}=this.view.state.selection.main;o.replaceStart!==-1?this.view.dispatch({changes:{from:o.replaceStart,to:o.replaceEnd,insert:t}}):this.view.dispatch(this.view.state.replaceSelection(t)),o.select&&this.view.dispatch({selection:{anchor:o.replaceStart===-1?i+o.deviationStart:o.replaceStart+o.deviationStart,head:o.replaceStart===-1?i+t.length+o.deviationEnd:o.replaceStart+t.length+o.deviationEnd}}),this.view.focus()}catch(i){if(i.message==="The input text is too long")x.emit(n,Qe,{name:"overlength",message:i.message,data:t});else throw i}}setTabSize(t){this.toggleTabSize([ul.tabSize.of(t),Ti.of(" ".repeat(t))])}setPlaceholder(t){this.togglePlaceholder($i(t))}focus(t){if(this.view.focus(),!t)return;let l=0,n=0,o=0;switch(t){case"start":break;case"end":{l=n=o=this.getValue().length;break}default:l=t.rangeAnchor||t.cursorPos,n=t.rangeHead||t.cursorPos,o=t.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:ft.create([ft.range(l,n),ft.cursor(o)],1)})}setDisabled(t){this.toggleDisabled([We.editable.of(!t)])}setReadOnly(t){this.toggleReadOnly([ul.readOnly.of(t)])}setMaxLength(t){this.maxLength=t,this.toggleMaxlength([ul.changeFilter.of(l=>l.newDoc.length<=t)])}}const As=(e,t)=>{const l=R("editorId"),n=i=>{i instanceof Promise?i.then(a=>{x.emit(l,W,"universal",{generate(){return{targetValue:a}}})}).catch(a=>{console.error(a)}):x.emit(l,W,"universal",{generate(){return{targetValue:i}}})};return i=>{var a,u,r;if(!i.clipboardData)return;if(i.clipboardData.files.length>0){const{files:T}=i.clipboardData;x.emit(l,il,Array.from(T).filter(w=>/image\/.*/.test(w.type))),i.preventDefault();return}const f=i.clipboardData.getData("text/plain"),h=((a=t.value)==null?void 0:a.view.state.selection.main.to)||0,s=((u=t.value)==null?void 0:u.view.state.doc.lineAt(h).from)||0,g=((r=t.value)==null?void 0:r.view.state.doc.sliceString(s,h))||"",v=/!\[.*\]\(\s*$/.test(g),C=/!\[.*\]\((.*)\s?.*\)/.test(f);if(v){const T=e.transformImgUrl(f);n(T),i.preventDefault();return}else if(C){const T=f.match(new RegExp(`(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?["']?.*["']?\\))`,"g"));T?Promise.all(T.map(w=>e.transformImgUrl(w))).then(w=>{n(w.reduce((k,p,b)=>k.replace(T[b],p),f))}):n(f),i.preventDefault();return}if(e.autoDetectCode&&i.clipboardData.types.includes("vscode-editor-data")){const T=JSON.parse(i.clipboardData.getData("vscode-editor-data"));x.emit(l,W,"code",{mode:T.mode,text:i.clipboardData.getData("text/plain")}),i.preventDefault();return}e.maxlength&&f.length+e.modelValue.length>e.maxlength&&x.emit(l,Qe,{name:"overlength",message:"The input text is too long",data:f})}},Ls=(e,t)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(x.emit(e,W,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:Ii,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:$=>(x.emit(e,ol,$.state.doc.toString()),!0),shift:()=>(x.emit(e,W,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(x.emit(e,W,"underline"),!0),shift:()=>(x.emit(e,W,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(x.emit(e,W,"italic"),!0),shift:()=>(x.emit(e,bl,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(x.emit(e,W,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(x.emit(e,W,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(x.emit(e,W,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(x.emit(e,W,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(x.emit(e,W,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(x.emit(e,W,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(x.emit(e,W,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(x.emit(e,W,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(x.emit(e,W,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(x.emit(e,W,"code"),!0),any($,y){return(y.ctrlKey||y.metaKey)&&y.altKey&&y.code==="KeyC"?(x.emit(e,W,"codeRow"),!0):!1}},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(x.emit(e,bl,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>t.noPrettier?!1:(x.emit(e,W,"prettier"),!0)},{any:($,y)=>(y.ctrlKey||y.metaKey)&&y.altKey&&y.shiftKey&&y.code==="KeyT"?(x.emit(e,W,"table"),!0):!1},...Li];We.EDIT_CONTEXT=!1;const Is=e=>{const t=R("tabWidth"),l=R("editorId"),n=R("theme"),o=V(),i=nt(),a=V(!1),u=new st,r=new st,f=new st,h=new st,s=new st,g=Ls(l,e),v=()=>[...g,...Si,...xi,_i],T={paste:As(e,i),blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{a.value=!0},compositionend:(p,b)=>{a.value=!1,e.updateModelValue(b.state.doc.toString())},input:p=>{e.onInput&&e.onInput(p);const{data:b}=p;e.maxlength&&e.modelValue.length+b.length>e.maxlength&&x.emit(l,Qe,{name:"overlength",message:"The input text is too long",data:b})}},w=[pi.of(v()),h.of(Dn()),u.of(bi({codeLanguages:Ei})),We.lineWrapping,We.updateListener.of(p=>{p.docChanged&&(e.onChange(p.state.doc.toString()),a.value||e.updateModelValue(p.state.doc.toString()))}),s.of(We.domEventHandlers(T)),yi()],k=()=>{const p=[...w,r.of(n.value==="light"?fo:io),f.of(mo(e.completions))];return oe.codeMirrorExtensions(n.value,p,v(),{editorId:l})};return Z(()=>{const p=new We({doc:e.modelValue,parent:o.value,extensions:[k()]}),b=new Es(p);i.value=b,setTimeout(()=>{b.setTabSize(t),b.setDisabled(e.disabled),b.setReadOnly(e.readonly),e.placeholder&&b.setPlaceholder(e.placeholder),typeof e.maxlength=="number"&&b.setMaxLength(e.maxlength),e.autofocus&&p.focus()},0),x.on(l,{name:Ao,callback(){wi(p)}}),x.on(l,{name:Lo,callback(){ki(p)}}),x.on(l,{name:W,async callback($,y={}){var _,H;if($==="image"&&y.transform){const L=e.transformImgUrl(y.url);if(L instanceof Promise)L.then(async A=>{var F;const{text:B,options:M}=await dl($,i.value,{...y,url:A});(F=i.value)==null||F.replaceSelectedText(B,M,l)}).catch(A=>{console.error(A)});else{const{text:A,options:F}=await dl($,i.value,{...y,url:L});(_=i.value)==null||_.replaceSelectedText(A,F,l)}}else{const{text:L,options:A}=await dl($,i.value,y);(H=i.value)==null||H.replaceSelectedText(L,A,l)}}}),x.on(l,{name:Fo,callback:fi($=>{var y;const _={...T},H=Object.keys(T);for(const L in $){const A=L;H.includes(A)?_[A]=(F,B)=>{$[A](F,B),F.defaultPrevented||T[A](F,B)}:_[A]=$[A]}(y=i.value)==null||y.view.dispatch({effects:s.reconfigure(We.domEventHandlers(_))})})}),x.on(l,{name:Ro,callback:($,y)=>{const _=p.state.doc.line($);p.dispatch(p.state.update({changes:{from:_.from,to:_.to,insert:y}}))}}),x.on(l,{name:Ho,callback(){x.emit(l,Jt,p)}}),x.emit(l,Jt,p)}),D(n,()=>{var p;(p=i.value)==null||p.view.dispatch({effects:r.reconfigure(n.value==="light"?fo:io)})},{deep:!0}),D(()=>e.completions,()=>{var p;(p=i.value)==null||p.view.dispatch({effects:f.reconfigure(mo(e.completions))})},{deep:!0}),D(()=>e.modelValue,()=>{var p,b;((p=i.value)==null?void 0:p.getValue())!==e.modelValue&&((b=i.value)==null||b.setValue(e.modelValue))}),D(()=>e.placeholder,()=>{var p;(p=i.value)==null||p.setPlaceholder(e.placeholder)}),D(()=>e.disabled,()=>{var p;(p=i.value)==null||p.setDisabled(e.disabled)}),D(()=>e.readonly,()=>{var p;(p=i.value)==null||p.setDisabled(e.readonly)}),D(()=>e.maxlength,()=>{var p;e.maxlength&&((p=i.value)==null||p.setMaxLength(e.maxlength))}),{inputWrapperRef:o,codeMirrorUt:i,resetHistory(){var p,b;(p=i.value)==null||p.view.dispatch({effects:h.reconfigure([])}),(b=i.value)==null||b.view.dispatch({effects:h.reconfigure(Dn())})}}},Fs=(e,t,l)=>{const n=ce(()=>/px$/.test(`${e.inputBoxWidth}`)?"50%":e.inputBoxWidth),o=be({resizedWidth:n.value}),i=be({width:n.value}),a=be({left:n.value,display:"initial"}),u=h=>{var s,g,v;const C=((s=t.value)==null?void 0:s.offsetWidth)||0,T=((g=t.value)==null?void 0:g.getBoundingClientRect().x)||0;let w=h.x-T;w/C<Ot?w=C*Ot:w>C-C*Ot&&(w=C-C*Ot);const k=`${w/C*100}%`;i.width=k,a.left=k,o.resizedWidth=k,(v=e.oninputBoxWidthChange)==null||v.call(e,k)},r=h=>{h.target===l.value&&document.addEventListener("mousemove",u)},f=()=>{document.removeEventListener("mousemove",u)};return D([l],()=>{document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",f),document.addEventListener("mousedown",r),document.addEventListener("mouseup",f)}),Z(()=>{document.addEventListener("mousedown",r),document.addEventListener("mouseup",f)}),ot(()=>{document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",f)}),D([n],([h])=>{o.resizedWidth=h,i.width=h,a.left=h}),D([Ne(e.setting,"htmlPreview"),Ne(e.setting,"preview"),Ne(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(i.width="0%",a.display="none"):!e.setting.htmlPreview&&!e.setting.preview?(i.width="100%",a.display="none"):(i.width=o.resizedWidth,a.display="initial")},{immediate:!0}),{inputWrapperStyle:i,resizeOperateStyle:a}},Rs=Co(),Hs=K({name:"MDEditorContent",props:ar,setup(e,t){const l=R("editorId"),n=V(""),o=V(),i=V(),{inputWrapperRef:a,codeMirrorUt:u,resetHistory:r}=Is(e),{inputWrapperStyle:f,resizeOperateStyle:h}=Fs(e,o,i);return Xr(e,n,u),t.expose({getSelectedText(){var s;return(s=u.value)==null?void 0:s.getSelectedText()},focus(s){var g;(g=u.value)==null||g.focus(s)},resetHistory:r,getEditorView(){var s;return(s=u.value)==null?void 0:s.view}}),()=>m("div",{class:`${c}-content`},[m("div",{class:`${c}-content-wrapper`,ref:o},[m("div",{class:`${c}-input-wrapper`,style:f,ref:a},null),(e.setting.htmlPreview||e.setting.preview)&&m("div",{class:`${c}-resize-operate`,style:h,ref:i},null),m(Bo,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:s=>{n.value=s,e.onHtmlChanged(s)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:e.onRemount},null)]),e.catalogVisible&&m(xt,{theme:e.theme,class:`${c}-catalog-editor ${c}-catalog-${e.catalogLayout}`,editorId:l,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2,syncWith:e.setting.preview?"preview":"editor",onClick:(s,g)=>{var v,C;if(!e.setting.preview&&g.line!==void 0){s.preventDefault();const T=(v=u.value)==null?void 0:v.view;if(T){const w=T.state.doc.line(g.line+1),k=(C=T.lineBlockAt(w.from))==null?void 0:C.top,p=T.scrollDOM;Rs(p,k)}}},catalogMaxDepth:e.catalogMaxDepth},null)])}}),Ms=K({props:{modelValue:{type:String,default:""}},setup(e){const t=R("usedLanguageText");return()=>{var l,n;return m("div",{class:`${c}-footer-item`},[m("label",{class:`${c}-footer-label`},[`${(l=t.value.footer)==null?void 0:l.markdownTotal}:`]),m("span",null,[((n=e.modelValue)==null?void 0:n.length)||0])])}}}),Os={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},disabled:{type:Boolean,default:void 0}},Ds=K({name:`${c}-checkbox`,props:Os,setup(e){return()=>m("div",{class:[`${c}-checkbox`,e.checked&&`${c}-checkbox-checked`,e.disabled&&`${c}-disabled`],onClick:()=>{e.disabled||e.onChange(!e.checked)}},null)}}),Ns={scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},Ps=K({props:Ns,setup(e){const t=R("usedLanguageText"),l=R("disabled");return()=>{var n;return m("div",{class:[`${c}-footer-item`,(l==null?void 0:l.value)&&`${c}-disabled`]},[m("label",{class:`${c}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[(n=t==null?void 0:t.value.footer)==null?void 0:n.scrollAuto]),m(Ds,{checked:e.scrollAuto,onChange:e.onScrollAutoChange,disabled:l==null?void 0:l.value},null)])}}}),Bs={modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},js=K({name:"MDEditorFooter",props:Bs,setup(e){const t=R("theme"),l=R("language"),n=R("disabled"),o=ce(()=>{const a=e.footers.indexOf("="),u=a===-1?e.footers:e.footers.slice(0,a),r=a===-1?[]:e.footers.slice(a,Number.MAX_SAFE_INTEGER);return[u,r]}),i=a=>{var u,r,f,h,s,g;if(_o.includes(a))switch(a){case"markdownTotal":return m(Ms,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&m(Ps,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}else if(e.defFooters instanceof Array){const v=e.defFooters[a];return v?_t(v,{theme:((u=v.props)==null?void 0:u.theme)||t.value,language:((r=v.props)==null?void 0:r.language)||l.value,disabled:((f=v.props)==null?void 0:f.disabled)||(n==null?void 0:n.value)}):""}else if(e.defFooters&&e.defFooters.children instanceof Array){const v=e.defFooters.children[a];return v?_t(v,{theme:((h=v.props)==null?void 0:h.theme)||t.value,language:((s=v.props)==null?void 0:s.language)||l.value,disabled:((g=v.props)==null?void 0:g.disabled)||(n==null?void 0:n.value)}):""}else return""};return()=>{const a=o.value[0].map(r=>i(r)),u=o.value[1].map(r=>i(r));return m("div",{class:`${c}-footer`},[m("div",{class:`${c}-footer-left`},[a]),m("div",{class:`${c}-footer-right`},[u])])}}}),ml=K({name:"MdEditorV3",props:yr,emits:wr,setup(e,t){const{noKatex:l,noMermaid:n,noPrettier:o,noUploadImg:i,noHighlight:a}=e,u=be({scrollAuto:e.scrollAuto}),r=V(),f=V(),{editorId:h}=dr(e,r),[s,g]=mr(e,t,{editorId:h}),v=gr(e,{editorId:h});return ur(e,t,{editorId:h}),fr(e),hr(e,t,{editorId:h}),vr(e,t,{editorId:h,catalogVisible:v,setting:s,updateSetting:g,codeRef:f}),ot(()=>{x.clear(h)}),()=>{const C=ye({props:e,ctx:t},"defToolbars"),T=ye({props:e,ctx:t},"defFooters");return m("div",{id:h,class:[c,e.class,e.theme==="dark"&&`${c}-dark`,s.fullscreen||s.pageFullscreen?`${c}-fullscreen`:""],style:e.style,ref:r},[e.toolbars.length>0&&m(qr,{noPrettier:o,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:s,updateSetting:g,tableShape:e.tableShape,defToolbars:C,noUploadImg:i,showToolbarName:e.showToolbarName,catalogVisible:v.value,codeTheme:e.codeTheme,insertLinkDirect:e.insertLinkDirect},null),m(Hs,{ref:f,modelValue:e.modelValue,setting:s,mdHeadingId:e.mdHeadingId,noMermaid:n,noPrettier:o,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:l,scrollAuto:u.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:a,updateModelValue:w=>{t.emit("update:modelValue",w)},onChange:w=>{var k;(k=e.onChange)==null||k.call(e,w),t.emit("onChange",w)},onHtmlChanged:w=>{var k;(k=e.onHtmlChanged)==null||k.call(e,w),t.emit("onHtmlChanged",w)},onGetCatalog:w=>{var k;(k=e.onGetCatalog)==null||k.call(e,w),t.emit("onGetCatalog",w)},onBlur:w=>{var k;(k=e.onBlur)==null||k.call(e,w),t.emit("onBlur",w)},onFocus:w=>{var k;(k=e.onFocus)==null||k.call(e,w),t.emit("onFocus",w)},onInput:w=>{var k;(k=e.onInput)==null||k.call(e,w),t.emit("onInput",w)},completions:e.completions,catalogVisible:v.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:w=>{var k;(k=e.onDrop)==null||k.call(e,w),t.emit("onDrop",w)},inputBoxWidth:e.inputBoxWidth,oninputBoxWidthChange:w=>{var k;(k=e.oninputBoxWidthChange)==null||k.call(e,w),t.emit("oninputBoxWidthChange",w)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var w;(w=e.onRemount)==null||w.call(e),t.emit("onRemount")},catalogLayout:e.catalogLayout,catalogMaxDepth:e.catalogMaxDepth},null),e.footers.length>0&&m(js,{modelValue:e.modelValue,footers:e.footers,defFooters:T,noScrollAuto:!s.preview&&!s.htmlPreview||s.previewOnly,scrollAuto:u.scrollAuto,onScrollAutoChange:w=>u.scrollAuto=w},null)])}}});ml.install=e=>(e.component(ml.name,ml),e.use(Yt).use(jt).use(Zt).use(xt).use(Kt),e);const Vs={onClick:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},gl=K({name:"NormalFooterToolbar",props:Vs,emits:["onClick"],setup(e,t){return()=>{const l=ye({props:e,ctx:t});return m("div",{class:[`${c}-footer-item`,e.disabled&&`${c}-disabled`],onClick:n=>{var o;e.disabled||((o=e.onClick)==null||o.call(e,n),t.emit("onClick",n))}},[l])}}});gl.install=e=>(e.component(gl.name,gl),e);var go={exports:{}},Q={},Sl={exports:{}},it={};function Uo(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function zs(e,t,l){}function Ws(e,t,l){}var Us=/javascript\s*\:/img;function Gs(e,t){return Us.test(t)?"":t}it.whiteList=Uo();it.getDefaultWhiteList=Uo;it.onAttr=zs;it.onIgnoreAttr=Ws;it.safeAttrValue=Gs;var qs={indexOf:function(e,t){var l,n;if(Array.prototype.indexOf)return e.indexOf(t);for(l=0,n=e.length;l<n;l++)if(e[l]===t)return l;return-1},forEach:function(e,t,l){var n,o;if(Array.prototype.forEach)return e.forEach(t,l);for(n=0,o=e.length;n<o;n++)t.call(l,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},kt=qs;function Xs(e,t){e=kt.trimRight(e),e[e.length-1]!==";"&&(e+=";");var l=e.length,n=!1,o=0,i=0,a="";function u(){if(!n){var h=kt.trim(e.slice(o,i)),s=h.indexOf(":");if(s!==-1){var g=kt.trim(h.slice(0,s)),v=kt.trim(h.slice(s+1));if(g){var C=t(o,a.length,g,v,h);C&&(a+=C+"; ")}}}o=i+1}for(;i<l;i++){var r=e[i];if(r==="/"&&e[i+1]==="*"){var f=e.indexOf("*/",i+2);if(f===-1)break;i=f+1,o=i+1,n=!1}else r==="("?n=!0:r===")"?n=!1:r===";"?n||u():r===`
`&&u()}return kt.trim(a)}var Ks=Xs,Nt=it,Ys=Ks;function vo(e){return e==null}function Zs(e){var t={};for(var l in e)t[l]=e[l];return t}function Go(e){e=Zs(e||{}),e.whiteList=e.whiteList||Nt.whiteList,e.onAttr=e.onAttr||Nt.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Nt.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Nt.safeAttrValue,this.options=e}Go.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,l=t.options,n=l.whiteList,o=l.onAttr,i=l.onIgnoreAttr,a=l.safeAttrValue,u=Ys(e,function(r,f,h,s,g){var v=n[h],C=!1;if(v===!0?C=v:typeof v=="function"?C=v(s):v instanceof RegExp&&(C=v.test(s)),C!==!0&&(C=!1),s=a(h,s),!!s){var T={position:f,sourcePosition:r,source:g,isWhite:C};if(C){var w=o(h,s,T);return vo(w)?h+":"+s:w}else{var w=i(h,s,T);if(!vo(w))return w}}});return u};var Qs=Go;(function(e,t){var l=it,n=Qs;function o(a,u){var r=new n(u);return r.process(a)}t=e.exports=o,t.FilterCSS=n;for(var i in l)t[i]=l[i];typeof window<"u"&&(window.filterCSS=e.exports)})(Sl,Sl.exports);var Al=Sl.exports,Ll={indexOf:function(e,t){var l,n;if(Array.prototype.indexOf)return e.indexOf(t);for(l=0,n=e.length;l<n;l++)if(e[l]===t)return l;return-1},forEach:function(e,t,l){var n,o;if(Array.prototype.forEach)return e.forEach(t,l);for(n=0,o=e.length;n<o;n++)t.call(l,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,l=t.exec(e);return l?l.index:-1}},Js=Al.FilterCSS,ec=Al.getDefaultWhiteList,ll=Ll;function qo(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Xo=new Js;function tc(e,t,l){}function lc(e,t,l){}function nc(e,t,l){}function oc(e,t,l){}function Ko(e){return e.replace(ac,"&lt;").replace(rc,"&gt;")}function ic(e,t,l,n){if(l=ti(l),t==="href"||t==="src"){if(l=ll.trim(l),l==="#")return"#";if(!(l.substr(0,7)==="http://"||l.substr(0,8)==="https://"||l.substr(0,7)==="mailto:"||l.substr(0,4)==="tel:"||l.substr(0,11)==="data:image/"||l.substr(0,6)==="ftp://"||l.substr(0,2)==="./"||l.substr(0,3)==="../"||l[0]==="#"||l[0]==="/"))return""}else if(t==="background"){if(Pt.lastIndex=0,Pt.test(l))return""}else if(t==="style"){if(po.lastIndex=0,po.test(l)||(bo.lastIndex=0,bo.test(l)&&(Pt.lastIndex=0,Pt.test(l))))return"";n!==!1&&(n=n||Xo,l=n.process(l))}return l=li(l),l}var ac=/</g,rc=/>/g,sc=/"/g,cc=/&quot;/g,uc=/&#([a-zA-Z0-9]*);?/gim,dc=/&colon;?/gim,fc=/&newline;?/gim,Pt=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,po=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,bo=/u\s*r\s*l\s*\(.*/gi;function Yo(e){return e.replace(sc,"&quot;")}function Zo(e){return e.replace(cc,'"')}function Qo(e){return e.replace(uc,function(l,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function Jo(e){return e.replace(dc,":").replace(fc," ")}function ei(e){for(var t="",l=0,n=e.length;l<n;l++)t+=e.charCodeAt(l)<32?" ":e.charAt(l);return ll.trim(t)}function ti(e){return e=Zo(e),e=Qo(e),e=Jo(e),e=ei(e),e}function li(e){return e=Yo(e),e=Ko(e),e}function hc(){return""}function mc(e,t){typeof t!="function"&&(t=function(){});var l=!Array.isArray(e);function n(a){return l?!0:ll.indexOf(e,a)!==-1}var o=[],i=!1;return{onIgnoreTag:function(a,u,r){if(n(a))if(r.isClosing){var f="[/removed]",h=r.position+f.length;return o.push([i!==!1?i:r.position,h]),i=!1,f}else return i||(i=r.position),"[removed]";else return t(a,u,r)},remove:function(a){var u="",r=0;return ll.forEach(o,function(f){u+=a.slice(r,f[0]),r=f[1]}),u+=a.slice(r),u}}}function gc(e){for(var t="",l=0;l<e.length;){var n=e.indexOf("<!--",l);if(n===-1){t+=e.slice(l);break}t+=e.slice(l,n);var o=e.indexOf("-->",n);if(o===-1)break;l=o+3}return t}function vc(e){var t=e.split("");return t=t.filter(function(l){var n=l.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),t.join("")}Q.whiteList=qo();Q.getDefaultWhiteList=qo;Q.onTag=tc;Q.onIgnoreTag=lc;Q.onTagAttr=nc;Q.onIgnoreTagAttr=oc;Q.safeAttrValue=ic;Q.escapeHtml=Ko;Q.escapeQuote=Yo;Q.unescapeQuote=Zo;Q.escapeHtmlEntities=Qo;Q.escapeDangerHtml5Entities=Jo;Q.clearNonPrintableCharacter=ei;Q.friendlyAttrValue=ti;Q.escapeAttrValue=li;Q.onIgnoreTagStripAll=hc;Q.StripTagBody=mc;Q.stripCommentTag=gc;Q.stripBlankChar=vc;Q.attributeWrapSign='"';Q.cssFilter=Xo;Q.getDefaultCSSWhiteList=ec;var al={},Ye=Ll;function pc(e){var t=Ye.spaceIndex(e),l;return t===-1?l=e.slice(1,-1):l=e.slice(1,t+1),l=Ye.trim(l).toLowerCase(),l.slice(0,1)==="/"&&(l=l.slice(1)),l.slice(-1)==="/"&&(l=l.slice(0,-1)),l}function bc(e){return e.slice(0,2)==="</"}function yc(e,t,l){var n="",o=0,i=!1,a=!1,u=0,r=e.length,f="",h="";e:for(u=0;u<r;u++){var s=e.charAt(u);if(i===!1){if(s==="<"){i=u;continue}}else if(a===!1){if(s==="<"){n+=l(e.slice(o,u)),i=u,o=u;continue}if(s===">"||u===r-1){n+=l(e.slice(o,i)),h=e.slice(i,u+1),f=pc(h),n+=t(i,n.length,f,h,bc(h)),o=u+1,i=!1;continue}if(s==='"'||s==="'")for(var g=1,v=e.charAt(u-g);v.trim()===""||v==="=";){if(v==="="){a=s;continue e}v=e.charAt(u-++g)}}else if(s===a){a=!1;continue}}return o<r&&(n+=l(e.substr(o))),n}var wc=/[^a-zA-Z0-9\\_:.-]/gim;function kc(e,t){var l=0,n=0,o=[],i=!1,a=e.length;function u(g,v){if(g=Ye.trim(g),g=g.replace(wc,"").toLowerCase(),!(g.length<1)){var C=t(g,v||"");C&&o.push(C)}}for(var r=0;r<a;r++){var f=e.charAt(r),h,s;if(i===!1&&f==="="){i=e.slice(l,r),l=r+1,n=e.charAt(l)==='"'||e.charAt(l)==="'"?l:Tc(e,r+1);continue}if(i!==!1&&r===n){if(s=e.indexOf(f,r+1),s===-1)break;h=Ye.trim(e.slice(n+1,s)),u(i,h),i=!1,r=s,l=r+1;continue}if(/\s|\n|\t/.test(f))if(e=e.replace(/\s|\n|\t/g," "),i===!1)if(s=Cc(e,r),s===-1){h=Ye.trim(e.slice(l,r)),u(h),i=!1,l=r+1;continue}else{r=s-1;continue}else if(s=$c(e,r-1),s===-1){h=Ye.trim(e.slice(l,r)),h=yo(h),u(i,h),i=!1,l=r+1;continue}else continue}return l<e.length&&(i===!1?u(e.slice(l)):u(i,yo(Ye.trim(e.slice(l))))),Ye.trim(o.join(" "))}function Cc(e,t){for(;t<e.length;t++){var l=e[t];if(l!==" ")return l==="="?t:-1}}function Tc(e,t){for(;t<e.length;t++){var l=e[t];if(l!==" ")return l==="'"||l==='"'?t:-1}}function $c(e,t){for(;t>0;t--){var l=e[t];if(l!==" ")return l==="="?t:-1}}function Sc(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function yo(e){return Sc(e)?e.substr(1,e.length-2):e}al.parseTag=yc;al.parseAttr=kc;var xc=Al.FilterCSS,_e=Q,ni=al,_c=ni.parseTag,Ec=ni.parseAttr,Qt=Ll;function Bt(e){return e==null}function Ac(e){var t=Qt.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Qt.trim(e.slice(t+1,-1));var l=e[e.length-1]==="/";return l&&(e=Qt.trim(e.slice(0,-1))),{html:e,closing:l}}function Lc(e){var t={};for(var l in e)t[l]=e[l];return t}function Ic(e){var t={};for(var l in e)Array.isArray(e[l])?t[l.toLowerCase()]=e[l].map(function(n){return n.toLowerCase()}):t[l.toLowerCase()]=e[l];return t}function oi(e){e=Lc(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=_e.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Ic(e.whiteList||e.allowList):e.whiteList=_e.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":_e.attributeWrapSign,e.onTag=e.onTag||_e.onTag,e.onTagAttr=e.onTagAttr||_e.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||_e.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||_e.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||_e.safeAttrValue,e.escapeHtml=e.escapeHtml||_e.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new xc(e.css))}oi.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,l=t.options,n=l.whiteList,o=l.onTag,i=l.onIgnoreTag,a=l.onTagAttr,u=l.onIgnoreTagAttr,r=l.safeAttrValue,f=l.escapeHtml,h=t.attributeWrapSign,s=t.cssFilter;l.stripBlankChar&&(e=_e.stripBlankChar(e)),l.allowCommentTag||(e=_e.stripCommentTag(e));var g=!1;l.stripIgnoreTagBody&&(g=_e.StripTagBody(l.stripIgnoreTagBody,i),i=g.onIgnoreTag);var v=_c(e,function(C,T,w,k,p){var b={sourcePosition:C,position:T,isClosing:p,isWhite:Object.prototype.hasOwnProperty.call(n,w)},$=o(w,k,b);if(!Bt($))return $;if(b.isWhite){if(b.isClosing)return"</"+w+">";var y=Ac(k),_=n[w],H=Ec(y.html,function(L,A){var F=Qt.indexOf(_,L)!==-1,B=a(w,L,A,F);return Bt(B)?F?(A=r(w,L,A,s),A?L+"="+h+A+h:L):(B=u(w,L,A,F),Bt(B)?void 0:B):B});return k="<"+w,H&&(k+=" "+H),y.closing&&(k+=" /"),k+=">",k}else return $=i(w,k,b),Bt($)?f(k):$},f);return g&&(v=g.remove(v)),v};var Fc=oi;(function(e,t){var l=Q,n=al,o=Fc;function i(u,r){var f=new o(r);return f.process(u)}t=e.exports=i,t.filterXSS=i,t.FilterXSS=o,function(){for(var u in l)t[u]=l[u];for(var r in n)t[r]=n[r]}(),typeof window<"u"&&(window.filterXSS=e.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(go,go.exports);export{ml as E};
