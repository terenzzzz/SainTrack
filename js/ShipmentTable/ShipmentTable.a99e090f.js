import{_ as B}from"../../assets/index-12956b57.js";import{al as r,o,I as d,J as a,R as s,a as e,P as m,c as D,Q as F,a4 as H,O as g,r as V,f as A,M as p,C as W}from"../@vue/@vue.f1ada3fe.js";const Y={class:"shipping-info"},q={class:"content-wrapper"},J={class:"text-wrapper"},Q={class:"value"},G={class:"text-wrapper"},K={class:"value"},X={class:"text-wrapper"},Z={class:"value"},ee={class:"text-wrapper"},te={class:"value"},le={class:"receiver-info"},ae={class:"customer"},se={class:"left"},ne={class:"d-flex flex-column"},oe={class:"right"},re={class:"shipment-info"},ie={class:"timeline-content"},ue={__name:"TrackingModal",props:{currentOrder:{type:Object,required:!0}},setup(f){const S=[{time:"2025-08-31 14:00",content:"Delivered",done:!1,location:"Recipient Address - Baltimore, MD",details:"Package will be delivered today."},{time:"2025-08-31 10:00",content:"Out for Delivery",done:!0,location:"Local Delivery Center - Baltimore, MD",details:"Courier is delivering the package to the recipient."},{time:"2025-08-30 18:00",content:"In Transit",done:!0,location:"Transit Hub - Harrisburg, PA",details:"Package is moving through the logistics network."},{time:"2025-08-30 09:00",content:"Shipped",done:!0,location:"Distribution Center - Philadelphia, PA",details:"Package handed to courier for transit."},{time:"2025-08-29 12:00",content:"Order Processed & Packed",done:!0,location:"Warehouse - New York, NY",details:"Items picked from inventory and packed for shipment."},{time:"2025-08-29 08:00",content:"Order Placed",done:!0,location:"Online Store",details:"Customer completed payment, order confirmed."}];return(h,l)=>{const P=r("el-avatar"),c=r("Phone"),i=r("el-icon"),x=r("Message"),O=r("el-col"),T=r("el-timeline-item"),$=r("el-timeline"),I=r("el-row");return o(),d(I,{gutter:24},{default:a(()=>[s(O,{span:12,class:"sticky"},{default:a(()=>[e("div",Y,[l[6]||(l[6]=e("div",{class:"d-flex title-wrapper"},[e("h3",{class:"h3"},"Shipping Info")],-1)),e("div",q,[e("div",J,[l[0]||(l[0]=e("p",{class:"label"},"Order number",-1)),e("p",Q,m(f.currentOrder.order_no||"—"),1)]),e("div",G,[l[1]||(l[1]=e("p",{class:"label"},"Tracking number",-1)),e("p",K,m(f.currentOrder.tracking_no||"—"),1)]),e("div",X,[l[2]||(l[2]=e("p",{class:"label"},"Courier",-1)),e("p",Z,m(f.currentOrder.courier||"—"),1)]),l[4]||(l[4]=e("div",{class:"text-wrapper"},[e("p",{class:"label"},"Weight"),e("p",{class:"value"},"55 kg")],-1)),l[5]||(l[5]=e("div",{class:"text-wrapper"},[e("p",{class:"label"},"Price"),e("p",{class:"value"},"$99.99")],-1)),e("div",ee,[l[3]||(l[3]=e("p",{class:"label"},"Estimated Delivery",-1)),e("p",te,m(f.currentOrder.estimated_delivery||"—"),1)])])]),e("div",le,[l[8]||(l[8]=e("h3",{class:"h3"},"Receiver Info",-1)),e("div",ae,[e("div",se,[s(P,{size:50,src:`https://ui-avatars.com/api/?name=${f.currentOrder.customer_name}&rounded=true`},null,8,["src"]),e("div",ne,[e("strong",null,m(f.currentOrder.customer_name),1),l[7]||(l[7]=e("p",null,"terence.jiang@sain3.com",-1))])]),e("div",oe,[s(i,{size:"20",class:"icon"},{default:a(()=>[s(c)]),_:1}),s(i,{size:"20",class:"icon"},{default:a(()=>[s(x)]),_:1})])]),l[9]||(l[9]=e("div",{class:"content-wrapper"},[e("div",{class:"text-wrapper"},[e("p",{class:"label"},"Country Code"),e("p",{class:"value"},"CN")]),e("div",{class:"text-wrapper"},[e("p",{class:"label"},"Address"),e("p",{class:"value"},"Dongguan 123 Road")])],-1))])]),_:1}),s(O,{span:12,class:"sticky"},{default:a(()=>[e("div",re,[l[12]||(l[12]=e("h3",{class:"h3"},"Route Details",-1)),s($,null,{default:a(()=>[(o(),D(F,null,H(S,(k,M)=>s(T,{key:M,timestamp:k.time,color:k.done?"green":"gray"},{default:a(()=>[e("div",ie,[e("p",null,[e("strong",null,m(k.content),1)]),e("p",null,[l[10]||(l[10]=e("em",null,"Location:",-1)),g(" "+m(k.location),1)]),e("p",null,[l[11]||(l[11]=e("em",null,"Details:",-1)),g(" "+m(k.details),1)])])]),_:2},1032,["timestamp","color"])),64))]),_:1})])]),_:1})]),_:1})}}},de=B(ue,[["__scopeId","data-v-b2da17d9"]]);const ce={class:"container"},pe={class:"table-wrapper"},me={key:0,class:"d-flex justify-between align-center"},_e={class:"h3"},ve={style:{"text-align":"left"}},fe={key:1},ye={style:{"text-align":"center"}},ge={__name:"ShipmentTable",props:{showActions:{type:Boolean,default:!0},columns:{type:Array,default:()=>["store","order_no","customer_name","courier","tracking_no","latest_status","status","delivery_status","created_at","operations"]},maxRows:{type:Number,default:10},showViewMore:{type:Boolean,default:!1},orderList:[],tableTitle:{type:String,default:"Order"},tableIcon:{type:String,default:""}},setup(f){const S=V(null),h=f,l=V(!1),P=V(null),c=V({order_no:"",customer_name:"",status:"",delivery_status:""}),i=A(()=>{const u={};for(const t of h.columns)u[t]=!0;return u}),x=A(()=>h.orderList.filter(t=>{const C=t.order_no.includes(c.value.order_no),w=t.customer_name.includes(c.value.customer_name),_=c.value.status?t.status===c.value.status:!0,v=c.value.delivery_status?t.delivery_status===c.value.delivery_status:!0;return C&&w&&_&&v}).slice(0,h.maxRows)),O=u=>{P.value=u,S.value=u,l.value=!0},T=u=>{const t=u.tracking_history||[];return t.length?t[t.length-1].info:"No info"},$=u=>{switch(u){case"Completed":return"success";case"Pending":return"warning";case"Cancelled":return"danger";case"Shipped":return"info";default:return"info"}},I=u=>{switch(u){case"Delivered":return"success";case"In Transit":return"info";case"Pending":return"warning";case"Problem":return"danger";default:return"info"}},k=u=>console.log("View tracking:",u),M=()=>{const u=h.columns.filter(v=>i.value[v]).map(v=>v.replace(/_/g," ").replace(/\b\w/g,y=>y.toUpperCase())),t=x.value.map(v=>h.columns.filter(y=>i.value[y]).map(y=>y==="latest_status"?T(v):y==="operations"?"":v[y]||"")),C=[u,...t].map(v=>v.join(",")).join(`
`),w=new Blob([C],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.href=URL.createObjectURL(w),_.setAttribute("download","orders.csv"),_.click()};return(u,t)=>{const C=r("el-input"),w=r("el-col"),_=r("el-option"),v=r("el-select"),y=r("el-button"),L=r("el-row"),R=r("router-link"),b=r("el-table-column"),j=r("el-link"),N=r("el-tag"),U=r("el-table"),E=r("el-dialog");return o(),D("div",ce,[f.showActions?(o(),d(L,{key:0,gutter:20,class:"actions-wrapper"},{default:a(()=>[i.value.order_no?(o(),d(w,{key:0,span:5},{default:a(()=>[t[6]||(t[6]=e("p",{class:"label"},"Search OrderID:",-1)),s(C,{modelValue:c.value.order_no,"onUpdate:modelValue":t[0]||(t[0]=n=>c.value.order_no=n),placeholder:"Search Order ID",clearable:""},null,8,["modelValue"])]),_:1})):p("",!0),i.value.customer_name?(o(),d(w,{key:1,span:5},{default:a(()=>[t[7]||(t[7]=e("p",{class:"label"},"Search Customer:",-1)),s(C,{modelValue:c.value.customer_name,"onUpdate:modelValue":t[1]||(t[1]=n=>c.value.customer_name=n),placeholder:"Search Customer",clearable:""},null,8,["modelValue"])]),_:1})):p("",!0),i.value.status?(o(),d(w,{key:2,span:5},{default:a(()=>[t[8]||(t[8]=e("p",{class:"label"},"Filter by Order Status:",-1)),s(v,{modelValue:c.value.status,"onUpdate:modelValue":t[2]||(t[2]=n=>c.value.status=n),placeholder:"Select Status",clearable:""},{default:a(()=>[s(_,{label:"Completed",value:"Completed"}),s(_,{label:"Pending",value:"Pending"}),s(_,{label:"Cancelled",value:"Cancelled"}),s(_,{label:"Shipped",value:"Shipped"})]),_:1},8,["modelValue"])]),_:1})):p("",!0),i.value.delivery_status?(o(),d(w,{key:3,span:5},{default:a(()=>[t[9]||(t[9]=e("p",{class:"label"},"Filter by Delivery Status:",-1)),s(v,{modelValue:c.value.delivery_status,"onUpdate:modelValue":t[3]||(t[3]=n=>c.value.delivery_status=n),placeholder:"Select Delivery Status",clearable:""},{default:a(()=>[s(_,{label:"Delivered",value:"Delivered"}),s(_,{label:"In Transit",value:"In Transit"}),s(_,{label:"Pending",value:"Pending"}),s(_,{label:"Problem",value:"Problem"})]),_:1},8,["modelValue"])]),_:1})):p("",!0),s(w,{span:2},{default:a(()=>[t[11]||(t[11]=e("p",{class:"label"}," ",-1)),s(y,{type:"primary",onClick:M},{default:a(()=>[...t[10]||(t[10]=[g("Export CSV",-1)])]),_:1})]),_:1})]),_:1})):p("",!0),e("div",pe,[f.showViewMore?(o(),D("div",me,[e("h3",_e,[W(u.$slots,"icon",{},void 0,!0),g(" "+m(f.tableTitle),1)]),s(R,{to:{name:"Orders"},class:"link"},{default:a(()=>[...t[12]||(t[12]=[g(" View More ",-1)])]),_:1})])):p("",!0),s(U,{ref:"orderTable",data:x.value,"tooltip-effect":"dark",style:{width:"100%",height:"100%"},"default-sort":{prop:"created_at",order:"descending"}},{default:a(()=>[i.value.store?(o(),d(b,{key:0,prop:"store",label:"Store",width:"180",align:"left",sortable:""})):p("",!0),i.value.order_no?(o(),d(b,{key:1,prop:"order_no",label:"Order ID","min-width":"150",align:"center",sortable:""})):p("",!0),i.value.customer_name?(o(),d(b,{key:2,prop:"customer_name",label:"Customer","min-width":"120",align:"left",sortable:""})):p("",!0),i.value.courier?(o(),d(b,{key:3,prop:"courier",label:"Courier",width:"120",align:"left"})):p("",!0),i.value.tracking_no?(o(),d(b,{key:4,label:"Tracking No","min-width":"150",align:"left"},{default:a(n=>[e("div",ve,[n.row.tracking_no?(o(),d(j,{key:0,type:"primary",onClick:z=>k(n.row.tracking_no)},{default:a(()=>[g(m(n.row.tracking_no),1)]),_:2},1032,["onClick"])):(o(),D("span",fe,"—"))])]),_:1})):p("",!0),i.value.latest_status?(o(),d(b,{key:5,label:"Latest Status","min-width":"200",align:"left","show-overflow-tooltip":""},{default:a(n=>[e("div",ye,m(T(n.row)),1)]),_:1})):p("",!0),i.value.status?(o(),d(b,{key:6,label:"Order Status",width:"120",align:"left"},{default:a(n=>[s(N,{type:$(n.row.status),style:{display:"flex","justify-content":"left"}},{default:a(()=>[g(m(n.row.status),1)]),_:2},1032,["type"])]),_:1})):p("",!0),i.value.delivery_status?(o(),d(b,{key:7,label:"Delivery Status",width:"150",align:"left"},{default:a(n=>[s(N,{type:I(n.row.delivery_status),style:{display:"flex","justify-content":"left"}},{default:a(()=>[g(m(n.row.delivery_status),1)]),_:2},1032,["type"])]),_:1})):p("",!0),i.value.created_at?(o(),d(b,{key:8,label:"Created At / ETA","min-width":"200",align:"left"},{default:a(n=>[g(m(n.row.created_at)+" / "+m(n.row.estimated_delivery),1)]),_:1})):p("",!0),i.value.operations?(o(),d(b,{key:9,label:"Operations",width:"120",align:"left"},{default:a(n=>[s(y,{type:"primary",size:"small",onClick:z=>O(n.row)},{default:a(()=>[...t[13]||(t[13]=[g("View",-1)])]),_:2},1032,["onClick"])]),_:1})):p("",!0)]),_:1},8,["data"]),s(E,{"model-value":l.value,width:"50%",title:"Order Details",onClose:t[5]||(t[5]=n=>l.value=!1)},{footer:a(()=>[s(y,{onClick:t[4]||(t[4]=n=>l.value=!1)},{default:a(()=>[...t[14]||(t[14]=[g("Close",-1)])]),_:1})]),default:a(()=>[s(de,{"current-order":S.value},null,8,["current-order"])]),_:1},8,["model-value"])])])}}},ke=B(ge,[["__scopeId","data-v-10a26481"]]);export{ke as T};
